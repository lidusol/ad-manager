{"version":3,"sources":["../../../lib/carousel/carousel.ts","../../../lib/carousel/carousel.module.ts"],"names":["CarouselMode","STYLES","theme","ref","dir","getDirection","DirAlias","before","right","left","carousel","selectorsOf","barAnimation","keyframesUniqueId","next","after","$priority","$global","className","root","st2c","StyleCollection","setTransformer","fn","actions","background","primary","default","alpha","text","slideContainer","slide","slideContent","slideAnim","slideNoEvent","indicators","indicator","indicatorIcon","shadowBuilder","indicatorActive","barContainer","bar","LyCarousel","_el","_cd","_theme","_renderer","sRenderer","_platform","this","classes","renderSheet","_intervalFn","mode","selectedIndex","_interval","_destroy","Subject","_hasNavigationArrows","_hasNavigationIndicators","Object","defineProperty","prototype","_pauseOnHover","val","newVal","toBoolean","_touch","removeClass","nativeElement","addClass","_autoplay","_resetInterval","stop","_hasProgressBar","ngOnInit","touch","autoplay","hasProgressBar","ngAfterViewInit","_this","isBrowser","lyItems","changes","pipe","takeUntil","subscribe","_markForCheck","ngOnDestroy","complete","_onMouseEnter","pauseOnHover","_onMouseLeave","_onDragStart","_selectedElement","find","_item","index","_nativeElement","_onDrag","e","rect","getBoundingClientRect","Math","abs","deltaX","width","_onPan","sign","_onDragEnd","variables","_select","prev","additionalEvent","eventName","velocity","removeStyle","_slide","_onDragCancel","notResetInterval","_slideClass","addStyle","toString","transform","len","length","clearInterval","_restartProgressBarAnimation","setInterval","interval","_progressBar","el","style","animationName","window","getComputedStyle","getPropertyValue","x","setStyle","markForCheck","Component","args","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","preserveWhitespaces","host","(mouseenter)","(mouseleave)","providers","StyleRenderer","ElementRef","ChangeDetectorRef","LyTheme2","Renderer2","Platform","ViewChild","ContentChildren","forwardRef","LyCarouselItem","Input","value","_className","Directive","NgModule","imports","CommonModule","LyCommonModule","exports","declarations"],"mappings":"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","sourcesContent":["import {\n  Component,\n  Directive,\n  QueryList,\n  ContentChildren,\n  Input,\n  AfterViewInit,\n  OnDestroy,\n  ElementRef,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  forwardRef,\n  OnInit,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\nimport {\n  LyTheme2,\n  toBoolean,\n  ThemeVariables,\n  DirAlias,\n  ThemeRef,\n  st2c,\n  keyframesUniqueId,\n  StyleCollection,\n  LyClasses,\n  StyleTemplate,\n  shadowBuilder,\n  StyleRenderer } from '@alyle/ui';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { Platform } from '@angular/cdk/platform';\n\n/** Default interval in ms */\nconst DEFAULT_INTERVAL = 7000;\nconst DEFAULT_AUTOPLAY = true;\nconst DEFAULT_HAS_PROGRESS_BAR = false;\nconst STYLE_PRIORITY = -2;\n\nexport interface LyCarouselTheme {\n  /** Styles for Carousel Component */\n  root?: StyleCollection<((classes: LyClasses<typeof STYLES>) => StyleTemplate)>\n  | ((classes: LyClasses<typeof STYLES>) => StyleTemplate);\n}\n\nexport interface LyCarouselVariables {\n  carousel?: LyCarouselTheme;\n}\n\nexport const STYLES = (theme: ThemeVariables & LyCarouselVariables, ref: ThemeRef) => {\n  const dir = theme.getDirection(DirAlias.before);\n  const right = dir === 'right' ? 0 : 180;\n  const left = dir === 'left' ? 0 : 180;\n  const carousel = ref.selectorsOf(STYLES);\n  const barAnimation = keyframesUniqueId.next();\n  const { after, before } = theme;\n  return {\n    $priority: STYLE_PRIORITY,\n    $global: (className: string) => `@keyframes ${barAnimation}{${className} 0%{transform:translateX(0%);}${className} 100%{transform:translateX(${dir === 'left' ? '-' : ''}100%);}}`,\n    root: ( ) => (className: string) => `${className}{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;}${st2c((\n          (theme.carousel\n            && theme.carousel.root\n            && (theme.carousel.root instanceof StyleCollection\n              ? theme.carousel.root.setTransformer(fn => fn(carousel))\n              : theme.carousel.root(carousel))\n          )), `${className}`)}${className} ${carousel.actions}.right{${after}:0;transform:rotate(${right}deg);}${className} ${carousel.actions}.left{${before}:0;transform:rotate(${left}deg);}${className} svg{display:block;fill:currentColor;}`,\n    actions: (className: string) => `${className}{position:absolute;top:0;bottom:0;margin:auto .25em;height:1em;width:1em;font-size:36px;cursor:pointer;background:${theme.background.primary.default.alpha(.25)};color:${theme.text.primary};will-change:transform;}`,\n    slideContainer: (className: string) => `${className}{overflow:hidden;display:block;width:100%;height:100%;position:relative;touch-action:pan-y !important;}`,\n    slide: (className: string) => `${className}{display:flex;width:100%;height:100%;will-change:transform;}${className} > ly-carousel-item{width:100%;flex-shrink:0;position:relative;background-size:cover;background-position:center;background-repeat:no-repeat;}`,\n    slideContent: (className: string) => `${className}{display:flex;}`,\n    slideAnim: (className: string) => `${className} > div{transition:transform 750ms cubic-bezier(.1, 1, 0.5, 1);}`,\n    slideNoEvent: (className: string) => `${className}>div{touch-action:initial !important;-webkit-user-drag:initial !important;}`,\n    indicators: () => (className: string) => `${className}{position:absolute;bottom:0;left:0;right:0;margin:0;box-sizing:border-box;display:flex;align-items:center;justify-content:center;height:48px;}`,\n    indicator: () => (className: string) => `${className}{display:inline-block;border-radius:50%;cursor:pointer;position:relative;padding:.5em;outline:none;}`,\n    indicatorIcon: () => (className: string) => `${className}{transition:300ms cubic-bezier(0.65, 0.05, 0.36, 1);width:1em;height:1em;transform:scale(.5);border-radius:50%;will-change:transform;display:block;opacity:.65;box-shadow:${shadowBuilder(8, theme.text.default)};background:${theme.background.primary.default};}`,\n    indicatorActive: () => (className: string) => `${className} ${carousel.indicatorIcon}{transform:scale(1);opacity:1;}`,\n    barContainer: (className: string) => `${className}{background:${theme.background.primary.default.alpha(.25)};height:4px;position:absolute;bottom:0;width:100%;}`,\n    bar: (className: string) => `${className}{height:4px;position:absolute;bottom:0;width:100%;animation-name:${barAnimation};animation-timing-function:linear;animation-iteration-count:infinite;background:${theme.text.primary};}`\n  };\n};\n\n/** @docs-private */\nexport enum CarouselMode {\n  /** full */\n  default,\n  inline\n}\n\n@Component({\n  selector: 'ly-carousel',\n  templateUrl: './carousel.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  preserveWhitespaces: false,\n  host: {\n    '(mouseenter)': '_onMouseEnter()',\n    '(mouseleave)': '_onMouseLeave()'\n  },\n  providers: [\n    StyleRenderer\n  ]\n})\nexport class LyCarousel implements OnInit, AfterViewInit, OnDestroy {\n  /** @docs-private */\n  readonly classes = this.sRenderer.renderSheet(STYLES, true);\n  private _intervalFn: number | null = null;\n  @ViewChild('slideContainer') slideContainer: ElementRef;\n  @ViewChild('_slide') _slide: ElementRef;\n  @ViewChild('_progressBar') _progressBar: ElementRef<HTMLDivElement>;\n  @ContentChildren(forwardRef(() => LyCarouselItem)) lyItems: QueryList<LyCarouselItem>;\n  /** @docs-private */\n  @Input() mode: CarouselMode = CarouselMode.default;\n  @Input() selectedIndex = 0;\n  _selectedElement: HTMLElement;\n  private _touch: boolean;\n  private _autoplay: boolean;\n  private _hasProgressBar: boolean;\n  private _interval = DEFAULT_INTERVAL;\n  private _slideClass: string;\n\n  /** Emits whenever the component is destroyed. */\n  private readonly _destroy = new Subject<void>();\n\n  /** @internal */\n  get _isIntervalFn() {\n    return !!this._intervalFn;\n  }\n\n  /**\n   * It will pause the slide change when the mouse cursor passes\n   * through the carousel.\n   */\n  @Input()\n  get pauseOnHover() {\n    return this._pauseOnHover;\n  }\n  set pauseOnHover(val: boolean) {\n    const newVal = toBoolean(val);\n    this._pauseOnHover = newVal;\n  }\n  private _pauseOnHover: boolean;\n\n  @Input()\n  set touch(val: boolean) {\n    const newVal = toBoolean(val);\n    this._touch = newVal;\n    if (newVal) {\n      this._renderer.removeClass(this._el.nativeElement, this.classes.slideNoEvent);\n    } else {\n      this._renderer.addClass(this._el.nativeElement, this.classes.slideNoEvent);\n    }\n  }\n  get touch() {\n    return this._touch;\n  }\n\n  @Input()\n  set autoplay(val: boolean) {\n    const newVal = toBoolean(val);\n    this._autoplay = newVal;\n    if (newVal) {\n      this._resetInterval();\n    } else {\n      this.stop();\n    }\n  }\n  get autoplay() {\n    return this._autoplay;\n  }\n\n  @Input()\n  set hasProgressBar(val: boolean) {\n    const newVal = toBoolean(val);\n    this._hasProgressBar = newVal;\n  }\n  get hasProgressBar() {\n    return this._hasProgressBar;\n  }\n\n  @Input()\n  set interval(val: number) {\n    this._interval = val;\n    this._resetInterval();\n  }\n  get interval() {\n    return this._interval;\n  }\n\n  @Input()\n  set hasNavigationArrows(val: boolean) {\n    this._hasNavigationArrows = toBoolean(val);\n  }\n  get hasNavigationArrows() {\n    return this._hasNavigationArrows;\n  }\n  private _hasNavigationArrows: boolean = true;\n\n  @Input()\n  set hasNavigationIndicators(val: boolean) {\n    this._hasNavigationIndicators = toBoolean(val);\n  }\n  get hasNavigationIndicators() {\n    return this._hasNavigationIndicators;\n  }\n  private _hasNavigationIndicators: boolean = true;\n\n  constructor(\n    private _el: ElementRef,\n    private _cd: ChangeDetectorRef,\n    private _theme: LyTheme2,\n    private _renderer: Renderer2,\n    readonly sRenderer: StyleRenderer,\n    private _platform: Platform\n  ) { }\n\n  ngOnInit() {\n    if (!this.touch) {\n      this.touch = false;\n    }\n    if (this.autoplay == null) {\n      this.autoplay = DEFAULT_AUTOPLAY;\n    }\n    if (this.hasProgressBar == null) {\n      this.hasProgressBar = DEFAULT_HAS_PROGRESS_BAR;\n    }\n  }\n\n  ngAfterViewInit() {\n    this._renderer.addClass(this.slideContainer.nativeElement, this.classes.slideContainer);\n    if (this._platform.isBrowser) {\n      this._renderer.addClass(this.slideContainer.nativeElement, this.classes.slideAnim);\n    }\n\n    this.lyItems.changes.pipe(takeUntil(this._destroy)).subscribe(() => this._markForCheck());\n  }\n\n  ngOnDestroy() {\n    this._destroy.next();\n    this._destroy.complete();\n    if (this._platform.isBrowser) {\n      this.stop();\n    }\n  }\n\n  _onMouseEnter() {\n    if (this.pauseOnHover) {\n      this.stop();\n    }\n  }\n\n  _onMouseLeave() {\n    if (this.pauseOnHover) {\n      this._resetInterval();\n    }\n  }\n\n  /** @docs-private */\n  _onDragStart() {\n    this.stop();\n    this._renderer.removeClass(this.slideContainer.nativeElement, this.classes.slideAnim);\n    this._selectedElement = this.lyItems.find((_item, index) => index === this.selectedIndex)!._nativeElement;\n  }\n\n  _onDrag(e) {\n    const rect = this._selectedElement.getBoundingClientRect();\n    if (Math.abs(e.deltaX) < rect.width) {\n      this._onPan(e.deltaX);\n    } else {\n      this._onPan(rect.width * Math.sign(e.deltaX));\n    }\n  }\n\n  _onDragEnd(e) {\n    const rect = this._selectedElement.getBoundingClientRect();\n    const dir = this._theme.variables.getDirection(DirAlias.before);\n    this._renderer.addClass(this.slideContainer.nativeElement, this.classes.slideAnim);\n    this._select(this.selectedIndex);\n\n    if (Math.abs(e.deltaX) > rect.width / 2) {\n      if (0 > e.deltaX) {\n        this.next();\n      } else if (0 < e.deltaX) {\n        this.prev();\n      }\n    } else if (e.additionalEvent) {\n      const eventName = e.additionalEvent;\n      if (Math.abs(e.velocity) >= 0.25) {\n        if (eventName === 'slideleft') {\n          if (dir === 'left') {\n            this.next();\n          } else {\n            this.prev();\n          }\n        } else if (eventName === 'slideright') {\n          if (dir === 'right') {\n            this.next();\n          } else {\n            this.prev();\n          }\n        }\n      }\n    }\n    this._renderer.removeStyle(this._slide.nativeElement, 'transform');\n  }\n\n  _onDragCancel() {\n    this._renderer.addClass(this.slideContainer.nativeElement, this.classes.slideAnim);\n    this._select(this.selectedIndex);\n    this._resetInterval();\n  }\n\n  _select(val: number, notResetInterval?: boolean) {\n    this.selectedIndex = val;\n    if (this.mode === CarouselMode.default) {\n      this._slideClass = this._theme.addStyle(\n        `lyCarousel.select:${val.toString(32)}`,\n        (theme: ThemeVariables) => {\n          const sign = theme.getDirection(DirAlias.before) === 'left' ? -1 : 1;\n          return {\n            transform: `translateX(${100 * val * sign}%)`\n          };\n        },\n        this._slide.nativeElement,\n        this._slideClass,\n        STYLE_PRIORITY\n      );\n    }\n    if (!notResetInterval) {\n      if (this.autoplay && !this.pauseOnHover) {\n        this._resetInterval();\n      }\n    }\n  }\n\n  prev() {\n    const len = this.lyItems.length - 1;\n    const prev = this.selectedIndex - 1;\n    this._select(prev < 0 ? len : prev);\n  }\n\n  next(notResetInterval?: boolean) {\n    const len = this.lyItems.length - 1;\n    const next = this.selectedIndex + 1;\n    this._select(next > len ? 0 : next, notResetInterval);\n  }\n\n  stop() {\n    if (this._intervalFn !== null) {\n      clearInterval(this._intervalFn);\n      this._intervalFn = null;\n    }\n  }\n\n  private _resetInterval() {\n    if (this._platform.isBrowser) {\n      this.stop();\n      this._restartProgressBarAnimation();\n      this._markForCheck();\n      this._intervalFn = setInterval(() => {\n        this.next(true);\n        this._restartProgressBarAnimation();\n        this._markForCheck();\n      }, this.interval) as any;\n    }\n  }\n\n  private _restartProgressBarAnimation() {\n    if (this.hasProgressBar && this._progressBar) {\n\n      const el = this._progressBar.nativeElement;\n\n      // Hack for restart animation\n      el.style.animationName = 'øfakeName';\n      window.getComputedStyle(el).getPropertyValue('opacity');\n      el.style.animationName = '';\n\n    }\n  }\n\n  private _onPan(x) {\n    const sign = this._theme.variables.getDirection(DirAlias.before) === 'left' ? -1 : 1;\n    this._renderer.setStyle(this._slide.nativeElement, 'transform', `translateX(calc(${sign * 100 * this.selectedIndex }% + ${x}px))`);\n  }\n\n  private _markForCheck() {\n    this._cd.markForCheck();\n  }\n\n}\n\n@Directive({\n  selector: 'ly-carousel-item'\n})\nexport class LyCarouselItem {\n  private _className: string;\n  @Input()\n  set srcImg(value: string) {\n    this._className = this._theme.addStyle(\n      `ly-carousel-img:${value}`, (\n        `background-image: url('${value}')`\n      ),\n      this._nativeElement,\n      this._className, STYLE_PRIORITY\n    );\n  }\n\n  _nativeElement: HTMLElement;\n\n  constructor(\n    private _theme: LyTheme2,\n    _el: ElementRef\n  ) {\n    this._nativeElement = _el.nativeElement;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LyCarouselItem, LyCarousel } from './carousel';\nimport { LyCommonModule } from '@alyle/ui';\n\n@NgModule({\n  imports: [CommonModule, LyCommonModule],\n  exports: [LyCarouselItem, LyCarousel, LyCommonModule],\n  declarations: [LyCarouselItem, LyCarousel]\n})\nexport class LyCarouselModule { }\n"]}