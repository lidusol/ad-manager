!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/animations"),require("@angular/cdk/coercion"),require("@angular/cdk/scrolling"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/menu",["exports","@angular/core","@alyle/ui","@angular/animations","@angular/cdk/coercion","@angular/cdk/scrolling","rxjs","rxjs/operators","@angular/forms","@angular/common"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ly=e.ly||{},e.ly.menu={}),e.ng.core,e.ly.core,e.ng.animations,e.ng.cdk.coercion,e.ng.cdk.scrolling,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.common)}(this,(function(e,t,n,r,o,i,s,u,a,p){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}Object.create;var h=function(e,t){var r=t.selectorsOf(h),o=e.after;return{$name:m.и,$priority:-1,root:function(){var t;return(null===(t=e.menu)||void 0===t?void 0:t.root)&&(e.menu.root instanceof n.StyleCollection?e.menu.root.setTransformer((function(e){return e(r)})).css:e.menu.root(r))},container:function(t){return t+"{background:"+e.background.primary.default+";border-radius:2px;box-shadow:"+n.shadowBuilder(4)+";display:block;padding-top:8px;padding-bottom:8px;transform-origin:inherit;pointer-events:all;overflow:auto;max-height:inherit;max-width:inherit;box-sizing:border-box;}"},item:function(e){return e+"{display:flex;min-height:48px;border-radius:0;width:100%;justify-content:flex-start;font-weight:400;}"+e+" ly-icon{margin-"+o+":16px;}"},itemSubMenuTrigger:function(){return function(e){return e+"{padding-"+o+":32px;}"+e+'::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;'+o+":16px;transform:translateY(-50%);}"}}}},c=[r.trigger("transformMenu",[r.transition("void => enter",r.group([r.style({opacity:0,transform:"scale(0.8)"}),r.animate("100ms linear",r.style({opacity:1})),r.animate("120ms cubic-bezier(0, 0, 0.2, 1)",r.style({transform:"scale(1)"}))]))]),r.trigger("transformMenuLeave",[r.transition("* => void",r.animate("100ms 25ms linear",r.style({opacity:0})))])],m=function(){function e(e,t,n,r,o){this._theme=e,this._el=t,this._renderer=n,this._viewportRuler=r,this.sRenderer=o,this.classes=this.sRenderer.renderSheet(h,!0),this._animationDone=new s.Subject,this._hasBackdrop=!0}return Object.defineProperty(e.prototype,"ref",{get:function(){return this._ref},set:function(e){this._ref=e,this._menuRef=e._menuRef},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=o.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){var e;(null===(e=this.ref)||void 0===e?void 0:e._menuRef)&&this._container&&(this.ref._menuRef.updateBackdrop(!this.ref._isItemSubMenuTrigger()&&this.hasBackdrop),this._updatePlacement(),this._checkBackdropAndOpenOnHover())},e.prototype.ngOnInit=function(){if(!this.ref)throw new Error("LyMenu: require @Input() ref")},e.prototype.ngAfterViewInit=function(){var e=this;this.ref._menuRef&&(this.ref._menuRef.onResizeScroll=this._updatePlacement.bind(this),this.ref._menuRef.updateBackdrop(!this.ref._isItemSubMenuTrigger()&&this.hasBackdrop),this._checkBackdropAndOpenOnHover()),this._updatePlacement(),this.ref.menuOpened.emit(),Promise.resolve(null).then((function(){e.ref._setMenuOpenToTrue()})),this._getHostMenuTrigger()._menuDetached.pipe(u.take(1)).subscribe((function(){return e._ref.closeMenu()})),this._addOpenOnHover()},e.prototype.ngOnDestroy=function(){this._removeOpenOnHoverListeners()},e.prototype._checkBackdropAndOpenOnHover=function(){var t,n=this._getHostMenuTrigger();if(this.hasBackdrop&&(null===(t=n._menuOpenOnHoverRef)||void 0===t?void 0:t.openOnHover))throw new Error(e.и+": Can't use [hasBackdrop] with [openOnHover] at the same time, set [hasBackdrop] to false to use [openOnHover]")},e.prototype._getHostMenuTrigger=function(){for(var e,t=this.ref;null===(e=t._menu)||void 0===e?void 0:e.ref;)t=t._menu.ref;return t},e.prototype._addOpenOnHover=function(){var e,t=this._getHostMenuTrigger();!(null===(e=t._menuOpenOnHoverRef)||void 0===e?void 0:e.openOnHover)||this._mouseenterListen||this._mouseleaveListen||(t._menuOpenOnHoverRef._handleMouseEnterOrLeave(!0),this._mouseenterListen=this._renderer.listen(this._el.nativeElement,"mouseenter",(function(){return t._menuOpenOnHoverRef._handleMouseEnterOrLeave(!0)})),this._mouseleaveListen=this._renderer.listen(this._el.nativeElement,"mouseleave",(function(){return t._menuOpenOnHoverRef._handleMouseEnterOrLeave(!1)})))},e.prototype._removeOpenOnHoverListeners=function(){this._mouseenterListen&&this._mouseenterListen(),this._mouseleaveListen&&this._mouseleaveListen()},e.prototype._updatePlacement=function(){var e,t,r=null===(e=this.ref._menuRef)||void 0===e?void 0:e.containerElement,o=null===(t=this._container)||void 0===t?void 0:t.nativeElement;if(r&&o){this._renderer.setStyle(o,"height","initial"),this._renderer.setStyle(o,"width","initial");var i=this.placement?new n.Positioning(this.placement,this.xPosition,this.yPosition,this.ref._getHostElement(),r,this._theme.variables):this.ref._isItemSubMenuTrigger()?new n.LyOverlayPosition(this._theme,this._viewportRuler,this.ref._getHostElement(),r).setXAnchor(n.XPosition.after).setYAnchor(n.YPosition.above).setFlip(!0).build():new n.LyOverlayPosition(this._theme,this._viewportRuler,this.ref._getHostElement(),r).setXAnchor(this.xAnchor).setYAnchor(this.yAnchor).setXAxis(this.xAxis).setYAxis(this.yAxis).setFlip(!0).build();i instanceof n.Positioning?(this._renderer.setStyle(r,"transform","translate3d("+i.x+"px, "+i.y+"px, 0)"),this._renderer.setStyle(this._el.nativeElement,"transform-origin",i.ox+" "+i.oy+" 0"),this._renderer.setStyle(o,"height","initial"===i.height?"100%":i.height),this._renderer.setStyle(o,"width","initial"===i.width?"100%":i.width)):(this._renderer.setStyle(r,"left",i.x+"px"),this._renderer.setStyle(r,"top",i.y+"px"),this._renderer.setStyle(o,"width",i.width?i.width+"px":"100%"),this._renderer.setStyle(o,"height",i.height?i.height+"px":"100%"),this._renderer.setStyle(this._el.nativeElement,"transform-origin",i.xo+"px "+i.yo+"px 0"))}},e.prototype._onAnimationStart=function(e){this._isAnimating=!0,"transformMenuLeave"===e.triggerName&&"void"===e.toState&&(this._isDestroying=!0)},e.prototype._onAnimationDone=function(e){this._animationDone.next(e),this._isAnimating=!1,"void"===e.toState&&"transformMenuLeave"===e.triggerName&&this.ref.destroy(this._menuRef)},e}();m.и="LyMenu",m.decorators=[{type:t.Component,args:[{selector:"ly-menu",animations:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(c),template:'<div #container\n  [class]="classes.container"\n  [@transformMenu]="\'enter\'"\n  (@transformMenu.start)="_onAnimationStart($event)"\n  (@transformMenu.done)="_onAnimationDone($event)"\n>\n  <ng-content></ng-content>\n</div>',exportAs:"lyMenu",providers:[n.StyleRenderer]}]}],m.ctorParameters=function(){return[{type:n.LyTheme2},{type:t.ElementRef},{type:t.Renderer2},{type:i.ViewportRuler},{type:n.StyleRenderer}]},m.propDecorators={ref:[{type:t.Input}],hasBackdrop:[{type:t.Input}],_container:[{type:t.ViewChild,args:["container"]}],menuItems:[{type:t.ContentChildren,args:[t.forwardRef((function(){return d}))]}],xAnchor:[{type:t.Input}],yAnchor:[{type:t.Input}],xAxis:[{type:t.Input}],yAxis:[{type:t.Input}],placement:[{type:t.Input}],xPosition:[{type:t.Input}],yPosition:[{type:t.Input}],transformMenuLeave:[{type:t.HostBinding,args:["@transformMenuLeave"]}],_onAnimationStart:[{type:t.HostListener,args:["@transformMenuLeave.start",["$event"]]}],_onAnimationDone:[{type:t.HostListener,args:["@transformMenuLeave.done",["$event"]]}]};var d=function(){function e(e,t,n){this._menu=e,n.addClass(t.nativeElement,e.classes.item)}return e.prototype._handleClick=function(){var e;if(this._menu.ref&&this._menu.ref._menuRef&&!this._getItemSubMenuTrigger())for(var t=this._menu.ref;t;)t.closeMenu(),t=null===(e=t._menu)||void 0===e?void 0:e.ref},e.prototype._handleMouseEnter=function(){var e=this,t=this._getItemSubMenuTrigger();t&&!this._menu._isDestroying?this._menu._isAnimating?this._menu._animationDone.pipe(u.take(1),u.delay(0,s.asapScheduler)).subscribe((function(){t.openMenu(),e._closeOtherMenus()})):(t.openMenu(),this._closeOtherMenus()):this._closeOtherMenus()},e.prototype._closeOtherMenus=function(){var e=this;this._menu.menuItems.forEach((function(t){var n;t!==e&&(null===(n=t._getItemSubMenuTrigger())||void 0===n||n.closeMenu())}))},e.prototype._setItemSubMenuTrigger=function(e){this._itemSubMenuTrigger=e},e.prototype._getItemSubMenuTrigger=function(){return this._itemSubMenuTrigger},e}();d.decorators=[{type:t.Directive,args:[{selector:"[ly-menu-item]",host:{"(click)":"_handleClick()","(mouseenter)":"_handleMouseEnter()"}}]}],d.ctorParameters=function(){return[{type:m,decorators:[{type:t.Optional}]},{type:t.ElementRef},{type:t.Renderer2}]};var f=function(){function e(e,n,r,o,i){this.elementRef=e,this.overlay=n,this._menuItem=r,this.sRenderer=o,this._menu=i,this.classes=this.sRenderer.renderSheet(h),this._menuOpen=!1,this._menuDetached=new s.Subject,this.menuOpened=new t.EventEmitter,this.menuClosed=new t.EventEmitter,this._isItemSubMenuTrigger()&&(r._setItemSubMenuTrigger(this),o.addClass(this.classes.itemSubMenuTrigger))}return Object.defineProperty(e.prototype,"menuOpen",{get:function(){return this._menuOpen},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroying||this.closeMenu(),this._menuDetached.complete()},e.prototype._handleClick=function(){this._isItemSubMenuTrigger()||this.toggleMenu()},e.prototype.openMenu=function(){this._menuRef||(this._menuRef=this.overlay.create(this.lyMenuTriggerFor,{$implicit:this,data:this.menuData},{styles:{top:0,left:0,pointerEvents:null},fnDestroy:this.detach.bind(this),hasBackdrop:!1}))},e.prototype.closeMenu=function(){this.detach()},e.prototype.toggleMenu=function(){this._menuRef?this.closeMenu():this.openMenu()},e.prototype.detach=function(){this._menuRef&&(this._menuRef.detach(),this._menuRef=null,this._destroying=!0,this._menuDetached.next())},e.prototype.destroy=function(e){var t=this;this.menuClosed.emit(null),e.remove(),this._destroying=!1,Promise.resolve(null).then((function(){return t._menuOpen=!1}))},e.prototype._getHostElement=function(){return this.elementRef.nativeElement},e.prototype._setMenuOpenToTrue=function(){this._menuOpen=!0},e.prototype._isItemSubMenuTrigger=function(){return!!this._menuItem},e}();f.decorators=[{type:t.Directive,args:[{selector:"[lyMenuTriggerFor]",host:{"(click)":"_handleClick()"},exportAs:"lyMenuTriggerFor",providers:[n.StyleRenderer]}]}],f.ctorParameters=function(){return[{type:t.ElementRef},{type:n.LyOverlay},{type:d,decorators:[{type:t.Optional}]},{type:n.StyleRenderer},{type:m,decorators:[{type:t.Optional}]}]},f.propDecorators={lyMenuTriggerFor:[{type:t.Input}],menuData:[{type:t.Input,args:["lyMenuTriggerData"]}],menuOpened:[{type:t.Output}],menuClosed:[{type:t.Output}]};var y=function(){function e(e){var t=this;this._trigger=e,this._events=new s.Subject,this._openOnHover=!0,e._menuOpenOnHoverRef=this,this._events.pipe(u.debounceTime(200)).subscribe((function(n){t.openOnHover&&(n?e.openMenu():e.closeMenu())}))}return Object.defineProperty(e.prototype,"openOnHover",{get:function(){return this._openOnHover},set:function(e){var t=this;this._openOnHover=o.coerceBooleanProperty(e),Promise.resolve(null).then((function(){return t._openOnHover?t._trigger._menuOpenOnHoverRef=t:delete t._trigger._menuOpenOnHoverRef}))},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this._events.complete()},e.prototype._handleMouseEnterOrLeave=function(e){this.openOnHover&&(e&&this._trigger.openMenu(),this._events.next(e))},e}();y.decorators=[{type:t.Directive,args:[{selector:"[lyMenuTriggerFor][openOnHover]",host:{"(mouseenter)":"_handleMouseEnterOrLeave(true)","(mouseleave)":"_handleMouseEnterOrLeave(false)"}}]}],y.ctorParameters=function(){return[{type:f}]},y.propDecorators={openOnHover:[{type:t.Input}]};var g=function(){};g.decorators=[{type:t.NgModule,args:[{imports:[p.CommonModule,a.FormsModule,n.LyCommonModule,n.LyOverlayModule],exports:[m,d,f,y],declarations:[m,d,f,y]}]}],e.LyMenu=m,e.LyMenuItem=d,e.LyMenuModule=g,e.LyMenuOpenOnHover=y,e.LyMenuTriggerFor=f,e.STYLES=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=alyle-ui-menu.umd.min.js.map