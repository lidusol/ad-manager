{"version":3,"file":"alyle-ui-snack-bar.umd.js","sources":["../../../lib/snack-bar/snack-bar.service.ts","../../../lib/snack-bar/snack-bar-ref.ts","../../../lib/snack-bar/snack-bar.ts","../../../lib/snack-bar/snack-bar.module.ts","../../../lib/snack-bar/alyle-ui-snack-bar.ts"],"names":["Injectable","Subject","XPosition","YPosition","st2c","EventEmitter","Directive","TemplateRef","LyTheme2","LyOverlay","Input","Output","NgModule","LyOverlayModule"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { LySnackBarRef } from './snack-bar-ref';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LySnackBarService {\n  /** @docs-private */\n  _currentSnackBar: LySnackBarRef | null;\n}\n","import { EventEmitter } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { OverlayFactory, LyTheme2 } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarDismiss } from './snack-bar';\n\nconst DEFAULT_DURATION = 6e3;\n\nexport class LySnackBarRef {\n  private _timer: any;\n  private _dismissedByAction = false;\n\n  /** Subject for notifying the user that the snack bar has been dismissed. */\n  private readonly _afterDismissed = new Subject<void>();\n\n  /** Gets an observable that is notified when the snack bar is finished closing. */\n  afterDismissed(): Observable<void> {\n    return this._afterDismissed.asObservable();\n  }\n  constructor(\n    private _snackBarService: LySnackBarService,\n    private _overlay: OverlayFactory | null,\n    private _afterDismissedEventEmitter: EventEmitter<LySnackBarDismiss>,\n    duration: number | 'Infinity',\n    private _theme: LyTheme2\n  ) {\n    if (duration !== 'Infinity') {\n      this._timer = setTimeout(() => {\n        this.dismiss();\n      }, duration || DEFAULT_DURATION);\n    }\n  }\n\n  dismiss() {\n    const snackBar = this._overlay;\n    const timer = this._timer;\n    this._afterDismissedEventEmitter.emit({dismissedByAction: this._dismissedByAction});\n    this._afterDismissed.next();\n    this._afterDismissed.complete();\n    if (snackBar) {\n      if (timer) {\n        // clear previous timer\n        clearTimeout(timer);\n      }\n\n      snackBar.containerElement.classList.remove(this._theme.selectorOf('SnackBar:open'));\n      setTimeout(() => {\n        snackBar.destroy();\n      }, 350);\n      this._snackBarService._currentSnackBar = null;\n      this._overlay = null;\n    }\n  }\n  dismissWithAction() {\n    const snackBar = this._overlay;\n    if (snackBar) {\n      this._dismissedByAction = true;\n      this.dismiss();\n    }\n  }\n}\n","import { Directive, Input, TemplateRef, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport {\n  LyTheme2,\n  LyOverlay,\n  ThemeVariables,\n  XPosition,\n  YPosition,\n  st2c,\n  StyleTemplate,\n  StyleCollection } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarRef } from './snack-bar-ref';\n\nexport interface LySnackBarTheme {\n  /** Styles for SnackBar Component */\n  root?: StyleTemplate | StyleCollection;\n}\n\n\nexport interface LySnackBarVariables {\n  snackBar?: LySnackBarTheme;\n}\n\nconst STYLE_PRIORITY = -2;\nconst DEFAULT_HORIZONTAL_POSITION = XPosition.after;\nconst DEFAULT_VERTICAL_POSITION = YPosition.below;\nexport const STYLES = (theme: ThemeVariables & LySnackBarVariables) => ({\n  $priority: STYLE_PRIORITY,\n  root: (className: string) => `${className}{border-radius:4px;display:flex;justify-content:space-between;align-items:center;margin:8px;padding:0 16px;min-height:48px;min-width:320px;max-width:320px;opacity:0;transition:opacity ${theme.animations.curves.standard} 350ms, transform ${theme.animations.curves.deceleration} 350ms;font-size:${theme.pxToRem(theme.typography.fontSize)};box-sizing:border-box;}${st2c((\n        (theme.snackBar\n          && theme.snackBar.root) || null), `${className}`)}@media ${theme.breakpoints['XSmall']}{${className}{width:calc(100% - 16px);min-width:calc(100% - 16px);}}`\n});\n\n/** Event that is emitted when a snack bar is dismissed. */\nexport interface LySnackBarDismiss {\n  /** Whether the snack bar was dismissed using the action fn. */\n  dismissedByAction: boolean;\n}\n\n@Directive({\n  selector: 'ng-template[ly-snack-bar]',\n  exportAs: 'lySnackBar'\n})\nexport class LySnackBar implements OnDestroy {\n\n  readonly classes = this._theme.renderStyleSheet(STYLES);\n  @Input() duration: number | 'Infinity';\n  @Input() horizontalPosition: 'center' | XPosition;\n  @Input() verticalPosition: YPosition;\n  @Output() afterDismissed = new EventEmitter<LySnackBarDismiss>();\n\n  constructor(\n    private _templateRef: TemplateRef<any>,\n    private _theme: LyTheme2,\n    private _overlay: LyOverlay,\n    private _snackBarService: LySnackBarService\n  ) { }\n\n  ngOnDestroy() {\n    this.dismiss();\n  }\n  /**\n   * Open a LySnackBar template\n   * @param snackBarData Data to be passed to the snack-bark.\n   */\n  open(snackBarData?: any) {\n    // close previous snackBar if exist\n    const sbrPrev = this._snackBarService._currentSnackBar;\n    if (sbrPrev) {\n      sbrPrev.dismiss();\n    }\n\n    const duration = this.duration;\n    const horizontalPosition = this.horizontalPosition || DEFAULT_HORIZONTAL_POSITION;\n    const verticalPosition = this.verticalPosition || DEFAULT_VERTICAL_POSITION;\n\n    const snackBar = this._overlay.create(this._templateRef, snackBarData, {\n      styles: {\n        // this remove previous style\n        justifyContent: null\n      },\n      hasBackdrop: false,\n      classes: [\n        this.classes.root,\n        this._theme.renderStyle(`SnackBar.hp:${horizontalPosition}.vp:${verticalPosition}`, (theme: ThemeVariables) => {\n          let marginLeft: 'auto' | undefined;\n          let left: 0 | undefined;\n          let marginRight: 'auto' | undefined;\n          let right: 0 | undefined;\n          let transform: string | undefined;\n          let top: number | undefined;\n          let bottom: number | undefined;\n          let hp: string | undefined;\n\n          if (verticalPosition === YPosition.above) {\n            transform = 'translateY(-180%)';\n            top = 0;\n          } if (verticalPosition === YPosition.below) {\n            transform = 'translateY(180%)';\n            bottom = 0;\n          }\n          if (horizontalPosition === 'center') {\n            marginRight = marginLeft = 'auto';\n            left = right = 0;\n          } else {\n            hp = theme.getDirection(horizontalPosition as any);\n          }\n\n          return (className: string) => `${className}{margin-left:${marginLeft};left:${left};margin-right:${marginRight};right:${right};transform:${transform};top:${top};bottom:${bottom};${hp}:0;}`;\n        }, STYLE_PRIORITY)\n      ]\n    });\n\n    this._theme.requestAnimationFrame(() => {\n      const newClass = this._theme.renderStyle('SnackBar:open', () => (\n        (className: string) => `${className}{opacity:1;transform:translateY(0);}`\n      ), STYLE_PRIORITY);\n      snackBar.containerElement.classList.add(newClass);\n    });\n\n    window.getComputedStyle(snackBar.containerElement).getPropertyValue('opacity');\n\n    const sbr = new LySnackBarRef(this._snackBarService, snackBar, this.afterDismissed, duration, this._theme);\n    this._snackBarService._currentSnackBar = sbr;\n    return sbr;\n  }\n\n  /** Dismiss snackBar */\n  dismiss() {\n    const sbr = this._snackBarService._currentSnackBar;\n    if (sbr) {\n      sbr.dismissWithAction();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LyOverlayModule } from '@alyle/ui';\nimport { LySnackBar } from './snack-bar';\n\n@NgModule({\n  imports: [LyOverlayModule],\n  declarations: [LySnackBar],\n  exports: [LySnackBar]\n})\nexport class LySnackBarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {LySnackBarService as ɵa} from './snack-bar.service';"]}