import { Component, ChangeDetectionStrategy, ElementRef, Renderer2, Input, forwardRef, ChangeDetectorRef, Output, EventEmitter, ViewChild, ViewChildren, InjectionToken, Inject, Optional } from '@angular/core';
import { LyTheme2, toBoolean, LY_COMMON_STYLES, toNumber, untilComponentDestroyed, Dir, StyleCollection, st2c, StyleRenderer } from '@alyle/ui';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { Subject } from 'rxjs';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@alyle/ui';

const _c0 = ["bg"];
const _c1 = ["track"];
const _c2 = ["ticksRef"];
const _c3 = ["thumbsRef"];
function LySlider_ng_template_4_ly_tick_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "ly-tick", 7);
} if (rf & 2) {
    const tick_r8 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("value", tick_r8);
} }
function LySlider_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, LySlider_ng_template_4_ly_tick_0_Template, 1, 1, "ly-tick", 6);
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r2._tickList);
} }
function LySlider_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0);
} }
function LySlider_ng_template_8_ly_mark_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "ly-mark", 7);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const mark_r10 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("value", mark_r10.value);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(mark_r10.label);
} }
function LySlider_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, LySlider_ng_template_8_ly_mark_0_Template, 2, 2, "ly-mark", 6);
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r5._marksList);
} }
function LySlider_div_9_div_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 0);
    ɵngcc0.ɵɵelementStart(1, "span", 0);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const thumb_r11 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r13 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("className", ctx_r13.classes.thumbLabel);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("className", ctx_r13.classes.thumbLabelValue);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(thumb_r11.displayValue);
} }
function LySlider_div_9_Template(rf, ctx) { if (rf & 1) {
    const _r16 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 8);
    ɵngcc0.ɵɵelementStart(1, "div", 9);
    ɵngcc0.ɵɵelementStart(2, "div", 10, 11);
    ɵngcc0.ɵɵlistener("focus", function LySlider_div_9_Template_div_focus_2_listener() { ɵngcc0.ɵɵrestoreView(_r16); const thumb_r11 = ctx.$implicit; const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15._onFocus(thumb_r11); })("blur", function LySlider_div_9_Template_div_blur_2_listener() { ɵngcc0.ɵɵrestoreView(_r16); const thumb_r11 = ctx.$implicit; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17._onBlur(thumb_r11); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(4, LySlider_div_9_div_4_Template, 3, 3, "div", 12);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const thumb_r11 = ctx.$implicit;
    const ctx_r6 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("className", ctx_r6.classes.thumbContainer)("ngStyle", thumb_r11.styles);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("className", ctx_r6.classes.thumbContent)("ngClass", thumb_r11.focused ? ctx_r6.classes.thumbContentFocused : null);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("className", ctx_r6.classes.thumb);
    ɵngcc0.ɵɵattribute("tabindex", ctx_r6.disabled ? 0 - 1 : 0);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r6.thumbVisible !== false);
} }
const _c4 = [[["ly-mark"]]];
const _c5 = ["ly-mark"];
export const LY_SLIDER_DEFAULT_OPTIONS = new InjectionToken('LY_SLIDER_DEFAULT_OPTIONS');
export const LY_SLIDER_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => LySlider),
    multi: true
};
const STYLE_PRIORITY = -2;
export const STYLES = (theme, ref) => {
    const __ = ref.selectorsOf(STYLES);
    const { before } = theme;
    return {
        $priority: STYLE_PRIORITY,
        root: () => (className) => `${className}{display:inline-block;position:relative;box-sizing:border-box;cursor:pointer;}${st2c(((theme.slider
            && theme.slider.root
            && (theme.slider.root instanceof StyleCollection
                ? theme.slider.root.setTransformer(fn => fn(__)).css
                : theme.slider.root(__)))), `${className}`)}${st2c((LY_COMMON_STYLES.fill), `${className} ${__.bg}`)}${className} ${__.bg}{margin:auto;}${className}${__.thumbVisible} ${__.thumb},${className}:not(${__.thumbNotVisible}):not(${__.disabled}) ${__.thumbContent}:hover ${__.thumb},${className}:not(${__.thumbNotVisible}) ${__.thumbContent}${__.thumbContentFocused} ${__.thumb}{border-radius:50% 50% 0%;}${className}${__.thumbVisible} ${__.thumbContent}::before,${className}:not(${__.thumbNotVisible}):not(${__.disabled}) ${__.thumbContent}:hover::before,${className}:not(${__.thumbNotVisible}) ${__.thumbContent}${__.thumbContentFocused}::before{transform:scale(1);}`,
        track: (className) => `${className}{position:absolute;margin:auto;}`,
        bg: null,
        thumbContainer: (className) => `${className}{width:0;height:0;position:absolute;margin:auto;}`,
        thumbContent: (className) => `${className}::before{content:'';position:absolute;opacity:.6;transform:scale(0);transition:transform ${theme.animations.durations.entering}ms ${theme.animations.curves.sharp} 0ms, background ${theme.animations.durations.complex}ms ${theme.animations.curves.sharp} 0ms;}`,
        thumb: (className) => `${className}{position:absolute;width:12px;height:12px;left:-6px;top:-6px;border-radius:50%;outline:0;transition:${['border-radius'].map(prop => `${prop} ${theme.animations.durations.exiting}ms ${theme.animations.curves.standard} 0ms`).join()};}${className}::before{content:'';border-radius:50%;transition:${['box-shadow'].map(prop => `${prop} ${theme.animations.durations.entering}ms ${theme.animations.curves.sharp} 0ms`).join()};}${st2c((LY_COMMON_STYLES.fill), `${className}::before`)}`,
        thumbLabel: (className) => `${className}{position:absolute;width:28px;height:28px;border-radius:50%;top:-14px;${before}:-14px;transition:${['transform', 'top', 'left', 'right', 'border-radius'].map(prop => `${prop} ${theme.animations.durations.entering}ms ${theme.animations.curves.sharp} 0ms`).join()};}`,
        thumbLabelValue: (className) => `${className}{display:flex;height:100%;width:100%;align-items:center;justify-content:center;font-size:12px;color:#fff;}`,
        horizontal: () => (className) => `${className}{width:120px;height:2px;padding:10px 0;touch-action:pan-y !important;}${className} ${__.track},${className} ${__.bg}{height:2px;width:100%;}${className} ${__.track}{${before}:0;top:0;bottom:0;}${className} ${__.thumb}{transform:rotateZ(-135deg);}${className} ${__.thumbLabel}{transform:rotateZ(45deg) scale(0);}${className}${__.thumbVisible} ${__.thumbLabel},${className}:not(${__.disabled}) ${__.thumbContent}:hover ${__.thumbLabel},${className} ${__.thumbContent}${__.thumbContentFocused} ${__.thumbLabel}{border-radius:50% 50% 0%;top:-50px;transform:rotateZ(45deg) scale(1);}${className} ${__.thumbLabelValue}{transform:rotateZ(-45deg);}${className} ${__.thumbContainer}{top:0;bottom:0;}${className} ${__.thumbContent}::before{width:2px;height:24px;left:-1px;top:-24px;}${className} ${__.tick}{width:2px;height:inherit;top:0;bottom:0;}${className} ${__.mark}{top:22px;transform:translateX(${theme.direction === Dir.ltr ? '-' : ''}50%);}${className}${__.marked}{margin-bottom:24px;}`,
        vertical: () => (className) => `${className}{width:2px;height:120px;padding:0 10px;touch-action:pan-x !important;}${className} ${__.track},${className} ${__.bg}{height:100%;width:2px;}${className} ${__.track}{bottom:0;left:0;right:0;}${className} ${__.thumb}{transform:${theme.direction === Dir.ltr ? 'rotateZ(135deg)' : 'rotateZ(-45deg)'};}${className} ${__.thumbLabel}{transform:rotateZ(-45deg) scale(0);}${className}${__.thumbVisible} ${__.thumbLabel},${className}:not(${__.disabled}) ${__.thumbContent}:hover ${__.thumbLabel},${className} ${__.thumbContent}${__.thumbContentFocused} ${__.thumbLabel}{border-radius:${theme.direction === Dir.ltr ? '50% 50% 0%' : '0 50% 50% 50%'};${before}:-50px;transform:rotateZ(-45deg) scale(1);}${className} ${__.thumbLabelValue}{transform:rotateZ(45deg);}${className} ${__.thumbContainer}{left:0;right:0;}${className} ${__.thumbContent}::before{width:24px;height:2px;${before}:-24px;top:-1px;}${className} ${__.tick}{width:inherit;height:2px;left:0;right:0;}${className} ${__.mark}{${before}:22px;transform:translateY(50%);}${className}${__.marked}{${theme.direction === Dir.ltr ? 'margin-right' : 'margin-left'}:24px;}`,
        marked: null,
        mark: (className) => `${className}{position:absolute;white-space:nowrap;font-size:14px;color:${theme.text.secondary};}`,
        markActive: (className) => `${className}{color:currentColor;}`,
        tick: (className) => `${className}{position:absolute;margin:auto;}`,
        tickActive: null,
        thumbVisible: null,
        thumbNotVisible: null,
        thumbContentFocused: null,
        sliding: null,
        disabled: (className) => `${className}{cursor:default;}`
    };
};
/** A change event emitted by the LySlider component. */
export class LySliderChange {
    constructor(
    /** The LySlider that changed. */
    source, 
    /** The new value of the source slider. */
    value) {
        this.source = source;
        this.value = value;
    }
}
export class LySlider {
    // private _ngClass: NgClass;
    constructor(_theme, _el, _renderer, _cd, sRenderer, _sr, _default) {
        this._theme = _theme;
        this._el = _el;
        this._renderer = _renderer;
        this._cd = _cd;
        this.sRenderer = sRenderer;
        this._sr = _sr;
        this._default = _default;
        this.classes = this._theme.renderStyleSheet(STYLES);
        this._value = null;
        this._min = 0;
        this._max = 100;
        this._step = 1;
        this._changes = new Subject();
        this._thumbs = [];
        this._rootClasses = new Set();
        /** Event emitted when the slider value has changed. */
        this.change = new EventEmitter();
        /** Event emitted when the slider thumb moves. */
        this.input = new EventEmitter();
        /** @docs-private */
        this.valueChange = new EventEmitter();
        /**
         * The registered callback function called when a blur event occurs on the input element.
         * @docs-private
         */
        this.onTouched = () => { };
        this._controlValueAccessorChangeFn = () => { };
        _renderer.addClass(_el.nativeElement, this.classes.root);
    }
    /** Whether or not to show the thumb. */
    get thumbVisible() {
        return this._thumbVisible;
    }
    set thumbVisible(val) {
        const newVal = val != null ? toBoolean(val) : null;
        if (newVal !== this.thumbVisible) {
            const { thumbVisible: thumbVisibleClass } = this.classes;
            const { thumbNotVisible: thumbNotVisibleClass } = this.classes;
            this._thumbVisible = newVal;
            this.sRenderer.toggleClass(thumbVisibleClass, newVal === true);
            this.sRenderer.toggleClass(thumbNotVisibleClass, newVal === false);
        }
    }
    /** Whether or not to show the marks, also accepts an array of marks. */
    get marks() {
        return this._marks;
    }
    set marks(val) {
        const newVal = toBoolean(val);
        if (newVal !== this.marks) {
            const newClass = this.classes.marked;
            if (newVal) {
                this._renderer.addClass(this._el.nativeElement, newClass);
                this._marksClass = newClass;
                this._marks = Array.isArray(val) ? val : newVal;
            }
            else if (this._marksClass) {
                this._marks = false;
                this._renderer.removeClass(this._el.nativeElement, newClass);
                this._marksClass = null;
            }
            if (Array.isArray(newVal)) {
                this._marksList = val;
            }
            else {
                this._marksList = null;
            }
        }
    }
    /** The maximum value that the slider can have. */
    get max() {
        return this._max;
    }
    set max(v) {
        this._max = toNumber(v, this._max);
        this._updateThumbs();
        this._cd.markForCheck();
    }
    /** The minimum value that the slider can have. */
    get min() {
        return this._min;
    }
    set min(v) {
        this._min = toNumber(v, this._min);
        // If the value wasn't explicitly set by the user, set it to the min.
        if (this._value === null) {
            this.value = this._min;
        }
        this._updateThumbs();
        this._cd.markForCheck();
    }
    /** The slider appearance style. */
    set appearance(val) {
        if (val !== this.appearance) {
            this._appearance = val;
            this._appearanceClass = this._sr.add(`${LySlider.и}.appearance:${val}`, (theme, ref) => {
                const classes = ref.selectorsOf(STYLES);
                if (theme.slider && theme.slider.appearance) {
                    const appearance = theme.slider.appearance[val];
                    if (appearance) {
                        return appearance instanceof StyleCollection
                            ? appearance.setTransformer((_) => _(classes)).css
                            : appearance(classes);
                    }
                }
                throw new Error(`${val} not found in theme.slider.appearance`);
            }, STYLE_PRIORITY, this._appearanceClass);
        }
    }
    get appearance() {
        return this._appearance;
    }
    /** Color of Slider */
    get color() {
        return this._color;
    }
    set color(val) {
        this._color = val;
        const styleKey = `${LySlider.и}.color:${val}`;
        const newStyle = (theme, ref) => {
            const color = theme.colorOf(val);
            const __ = ref.selectorsOf(STYLES);
            if (theme.slider && theme.slider.color) {
                const sliderColor = theme.slider.color;
                if (sliderColor) {
                    return sliderColor instanceof StyleCollection
                        ? (sliderColor).setTransformer((_) => _(__, color)).css
                        : sliderColor(__, color);
                }
            }
            throw new Error(`${val} not found in theme.slider.color`);
        };
        this._colorClass = this._sr.add(styleKey, newStyle, STYLE_PRIORITY + 1, this._colorClass);
    }
    /** Whether the slider is vertical. */
    get vertical() {
        return this._vertical;
    }
    set vertical(val) {
        const newVal = toBoolean(val);
        this._vertical = newVal;
        const newClass = newVal
            ? this.classes.vertical
            : this.classes.horizontal;
        this._verticalClass = this._theme.updateClass(this._el.nativeElement, this._renderer, newClass, this._verticalClass);
        this._updateThumbs();
        this._cd.markForCheck();
    }
    /** The values at which the thumb will snap. */
    get step() { return this._step; }
    set step(v) {
        this._step = toNumber(v, this._step);
        this._stepPrecision = this._step % 1 !== 0
            ? this._step.toString().split('.')[1].length
            : null;
        this._cd.markForCheck();
    }
    /**
     * Value of a slider, this can be a number or an array of numbers.
     * If the array of numbers has more than one value,
     * then this will create more thumbs
     */
    get value() {
        return this._value;
    }
    set value(val) {
        if (val !== this._value) {
            const valueIsArray = Array.isArray(val);
            if (typeof val === 'number') {
                let newValue = Number(val);
                newValue = (newValue === this.min || newValue === this.max)
                    ? newValue
                    : parseFloat(newValue.toFixed(this._stepPrecision));
                this._value = newValue;
            }
            else if (valueIsArray && !arrayEquals(this._value, val)) {
                let newValue = val;
                newValue = newValue.map(_val => _val === null
                    ? _val
                    : (_val === this.min || _val === this.max)
                        ? _val
                        : parseFloat(_val.toFixed(this._stepPrecision)));
                this._value = newValue;
            }
            this._thumbs = (valueIsArray ?
                this._value
                : [this._value]).map((v, index) => ({
                index,
                value: toNumber(v, this.min),
                displayValue: null,
                percent: null,
                styles: {}
            }));
            this._updateThumbs();
            this._cd.markForCheck();
        }
    }
    /** Whether the slider is disabled. */
    get disabled() {
        return this._disabled;
    }
    set disabled(val) {
        const newVal = toBoolean(val);
        if (newVal !== this.disabled) {
            this._disabled = newVal;
            if (newVal) {
                const color = this.color;
                const styleKey = `${LySlider.и}.disabled:${val}-${color}`;
                let newStyle;
                newStyle = (theme, ref) => {
                    const clr = theme.colorOf(color);
                    const __ = ref.selectorsOf(STYLES);
                    if (theme.slider && theme.slider.disabled) {
                        const sliderColor = theme.slider.disabled;
                        if (sliderColor) {
                            return sliderColor instanceof StyleCollection
                                ? (sliderColor).setTransformer((_) => _(__, clr)).css
                                : sliderColor(__, clr);
                        }
                    }
                    throw new Error(`${val} not found in theme.slider.color`);
                };
                const newClass = this._sr.add(styleKey, newStyle, STYLE_PRIORITY + 1.5, this._disabledClass);
                this.sRenderer.addClass(this.classes.disabled);
                this._disabledClass = newClass;
            }
            else if (this._disabledClass) {
                this.sRenderer.removeClass(this._disabledClass);
                this.sRenderer.removeClass(this.classes.disabled);
                this._disabledClass = null;
            }
        }
    }
    /**
     * Whether or not to show the thumb label, but if the value is a number,
     * it will show ticks according to the steps. For example: if you set
     * 3 ticks with a step of 10, you will draw a tick every 30 values
     */
    get ticks() {
        return this._ticks;
    }
    set ticks(val) {
        const newValue = toNumber(val, toBoolean(val));
        this._ticks = newValue;
    }
    get _tickList() {
        return this.__tickList;
    }
    ngOnChanges() {
        this._updateTickValues();
        this._changes.next();
    }
    ngOnInit() {
        this._theme.directionChanged.pipe(untilComponentDestroyed(this)).subscribe(() => {
            this.ngOnChanges();
            this._updateThumbs();
            this._cd.markForCheck();
        });
        /** Set default appearance */
        if (this.appearance == null) {
            this.appearance = (this._default && this._default.appearance) || 'standard';
        }
        /** Set horizontal slider */
        if (this.vertical == null) {
            this.vertical = false;
        }
        /** Set default color */
        if (this.color == null) {
            this.color = 'accent';
        }
        /** Set default step */
        if (this.step == null) {
            this.step = 1;
        }
    }
    ngOnDestroy() {
        this._changes.complete();
    }
    writeValue(value) {
        this.value = value;
        this._changes.next();
    }
    /**
     * Registers a function called when the control value changes.
     *
     * @param fn The callback function
     */
    registerOnChange(fn) {
        this._controlValueAccessorChangeFn = fn;
    }
    /**
     * Registers a function called when the control is touched.
     *
     * @param fn The callback function
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * Disables the select. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param isDisabled Sets whether the component is disabled.
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    _onFocus(thumb) {
        if (!this.disabled) {
            thumb.focused = true;
        }
    }
    _onBlur(thumb) {
        if (!this.disabled) {
            thumb.focused = false;
        }
    }
    _onTap(event) {
        if (this.disabled) {
            return;
        }
        this._startSlide();
        this._updateValueFromPosition(event.center.x, event.center.y);
        this._onSlideEnd();
    }
    _onSlide(event) {
        if (this.disabled) {
            return;
        }
        this._startSlide();
        if (event['isFinal']) {
            if (event['pointerType'] === 'touch' && event.center.x === 0 && event.center.y === 0) {
                // restore to initial position
                this.value = this._valueOnSlideStart;
            }
            else {
                this._updateValueFromPosition(event.center.x, event.center.y);
            }
            this._onSlideEnd();
        }
        else {
            this._updateValueFromPosition(event.center.x, event.center.y);
        }
        event.preventDefault();
        this._emitInputEvent();
        this._changes.next();
    }
    _startSlide() {
        if (!this._isSliding) {
            this._isSliding = true;
            this._renderer.addClass(this._el.nativeElement, this.classes.sliding);
            // clone
            this._valueOnSlideStart = Array.isArray(this.value) ? this.value.slice(0) : this.value;
            this._thumbsOnSlideStart = this._thumbs.slice(0).map(t => (Object.assign({}, t)));
            this._currentRect = this._bg.nativeElement.getBoundingClientRect();
        }
    }
    _onSlideEnd() {
        if (this._isSliding) {
            this._isSliding = false;
            this._renderer.removeClass(this._el.nativeElement, this.classes.sliding);
            if (!valueEquals(this._valueOnSlideStart, this.value) && !this.disabled) {
                this._emitChangeEvent();
                this._changes.next();
            }
            this._thumbsOnSlideStart = null;
            this._valueOnSlideStart = null;
            this._closestIndex = null;
            this._currentRect = null;
        }
    }
    _trackByFn(_index, item) {
        return item.index;
    }
    _updateValueFromPosition(x, y) {
        if (!this._bg) {
            return;
        }
        const w = this._currentRect.width;
        const h = this._currentRect.height;
        x -= this._currentRect.x;
        y -= this._currentRect.y;
        let percent = clamp(this.vertical
            ? гvalueToPercent(y, 0, h)
            : гvalueToPercent(x, 0, w), 0, 100);
        if (this.vertical || (!this.vertical && this._theme.variables.direction === Dir.rtl)) {
            percent = 100 - percent;
        }
        let value;
        if (percent === 0) {
            value = this.min;
        }
        else if (percent === 100) {
            value = this.max;
        }
        else {
            value = this._roundValueToStep(percentToValue(percent, this.min, this.max));
        }
        if (this._closestIndex == null) {
            this._closestIndex = findClosest(this._thumbs.map(thumb => thumb.value), value);
        }
        const currentThumb = this._thumbsOnSlideStart[this._closestIndex];
        this._slidingThumbValue = currentThumb.value = value;
        if (Array.isArray(this.value)) {
            this.value = this._thumbsOnSlideStart.map(thumb => thumb.value).sort(ASC);
        }
        else {
            this.value = value;
        }
        // focus slidingThumb
        const currentSlidingThumb = this._thumbs.find(thumb => thumb.value === value);
        if (currentSlidingThumb) {
            currentSlidingThumb.focused = true;
            this._thumbsRef.toArray()[currentSlidingThumb.index].nativeElement.focus();
        }
    }
    _updateThumbs() {
        this._thumbs.forEach(thumb => {
            const val = clamp(thumb.value, this.min, this.max);
            const percent = гvalueToPercent(val, this.min, this.max);
            const pos = this._calculatePosition(percent);
            thumb.value = val;
            thumb.displayValue = this._transformValue(val);
            thumb.percent = percent;
            thumb.focused = false;
            thumb.styles = {
                [pos.style]: pos.value
            };
        });
        this._updateTrack();
    }
    _calculatePosition(percent) {
        let style;
        const value = `${percent}%`;
        if (this.vertical) {
            style = 'bottom';
        }
        else {
            style = this._theme.variables.direction === 'rtl' ? 'right' : 'left';
        }
        return {
            style,
            value
        };
    }
    _updateTrack() {
        const track = this._track;
        const thumbs = this._thumbs;
        const thumbsPercents = thumbs.map(thumb => thumb.percent);
        const direction = this._theme.variables.direction === 'rtl' ? 'right' : 'left';
        if (thumbs.length === 1) {
            thumbsPercents.unshift(0);
        }
        const minPercent = this._minPercent = Math.min(...thumbsPercents);
        const maxPercent = this._maxPercent = Math.max(...thumbsPercents);
        if (track) {
            track.nativeElement.style.width = null;
            track.nativeElement.style.height = null;
            track.nativeElement.style.left = null;
            track.nativeElement.style.right = null;
            if (this.vertical) {
                track.nativeElement.style.height = `${(maxPercent - minPercent)}%`;
                track.nativeElement.style.bottom = `${minPercent}%`;
            }
            else {
                track.nativeElement.style.width = `${maxPercent - minPercent}%`;
                track.nativeElement.style[direction] = `${minPercent}%`;
            }
        }
    }
    /** Emits a change event. */
    _emitChangeEvent() {
        this._controlValueAccessorChangeFn(this.value);
        this.valueChange.emit(this.value);
        this.change.emit(this._createChangeEvent());
    }
    /** Emits an input event. */
    _emitInputEvent() {
        this.input.emit(this._createChangeEvent());
    }
    _createChangeEvent(value = this.value) {
        return new LySliderChange(this, value);
    }
    _roundValueToStep(value) {
        return Number((Math.round(value / this.step) * this.step).toFixed(this._stepPrecision));
    }
    _transformValue(value) {
        if (this.displayWith) {
            return this.displayWith(value);
        }
        return value;
    }
    _getHostElement() {
        return this._el.nativeElement;
    }
    _updateTickValues() {
        this.__tickList = [];
        if (!this.ticks) {
            return false;
        }
        else {
            const ticks = this.ticks;
            this._tickInterval = typeof ticks === 'number'
                ? this.step * ticks
                : this.step;
            this.__tickList = [];
            const tickIntervals = this._tickInterval + 1;
            const stepWith = this._tickInterval;
            for (let index = 0; index < tickIntervals; index++) {
                this.__tickList.push(clamp(index * stepWith, this.min, this.max));
            }
        }
        this._cd.markForCheck();
    }
}
LySlider.ɵfac = function LySlider_Factory(t) { return new (t || LySlider)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LyTheme2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.StyleRenderer), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.StyleRenderer), ɵngcc0.ɵɵdirectiveInject(LY_SLIDER_DEFAULT_OPTIONS, 8)); };
LySlider.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LySlider, selectors: [["ly-slider"]], viewQuery: function LySlider_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵstaticViewQuery(_c1, true);
        ɵngcc0.ɵɵstaticViewQuery(_c2, true);
        ɵngcc0.ɵɵviewQuery(_c3, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._bg = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._track = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._ticksRef = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._thumbsRef = _t);
    } }, hostBindings: function LySlider_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("slide", function LySlider_slide_HostBindingHandler($event) { return ctx._onSlide($event); })("slideend", function LySlider_slideend_HostBindingHandler() { return ctx._onSlideEnd(); })("tap", function LySlider_tap_HostBindingHandler($event) { return ctx._onTap($event); });
    } }, inputs: { thumbVisible: "thumbVisible", marks: "marks", max: "max", min: "min", value: "value", appearance: "appearance", color: "color", vertical: "vertical", step: "step", disabled: "disabled", ticks: "ticks", displayWith: "displayWith" }, outputs: { change: "change", input: "input", valueChange: "valueChange" }, exportAs: ["lySlider"], features: [ɵngcc0.ɵɵProvidersFeature([
            LY_SLIDER_CONTROL_VALUE_ACCESSOR,
            StyleRenderer
        ]), ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c5, decls: 10, vars: 7, consts: [[3, "className"], ["bg", ""], ["track", ""], [3, "ngIf"], ["ticksRef", ""], [3, "className", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [3, "className", "ngStyle"], [3, "className", "ngClass"], [3, "className", "focus", "blur"], ["thumbsRef", ""], [3, "className", 4, "ngIf"]], template: function LySlider_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c4);
        ɵngcc0.ɵɵelement(0, "div", 0, 1);
        ɵngcc0.ɵɵelement(2, "div", 0, 2);
        ɵngcc0.ɵɵtemplate(4, LySlider_ng_template_4_Template, 1, 1, "ng-template", 3);
        ɵngcc0.ɵɵelement(5, "span", null, 4);
        ɵngcc0.ɵɵtemplate(7, LySlider_ng_template_7_Template, 1, 0, "ng-template", 3);
        ɵngcc0.ɵɵtemplate(8, LySlider_ng_template_8_Template, 1, 1, "ng-template", 3);
        ɵngcc0.ɵɵtemplate(9, LySlider_div_9_Template, 5, 7, "div", 5);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("className", ctx.classes.bg);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("className", ctx.classes.track);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.ticks);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.marks);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx._marksList);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx._thumbs)("ngForTrackBy", ctx._trackByFn);
    } }, encapsulation: 2, changeDetection: 0 });
LySlider.и = 'LySlider';
LySlider.ctorParameters = () => [
    { type: LyTheme2 },
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: StyleRenderer },
    { type: StyleRenderer },
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [LY_SLIDER_DEFAULT_OPTIONS,] }] }
];
LySlider.propDecorators = {
    thumbVisible: [{ type: Input }],
    marks: [{ type: Input }],
    max: [{ type: Input }],
    min: [{ type: Input }],
    appearance: [{ type: Input }],
    color: [{ type: Input }],
    vertical: [{ type: Input }],
    step: [{ type: Input }],
    value: [{ type: Input }],
    disabled: [{ type: Input }],
    ticks: [{ type: Input }],
    _bg: [{ type: ViewChild, args: ['bg',] }],
    _track: [{ type: ViewChild, args: ['track', { static: true },] }],
    _ticksRef: [{ type: ViewChild, args: ['ticksRef', { static: true },] }],
    _thumbsRef: [{ type: ViewChildren, args: ['thumbsRef',] }],
    displayWith: [{ type: Input }],
    change: [{ type: Output }],
    input: [{ type: Output }],
    valueChange: [{ type: Output }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LySlider, [{
        type: Component,
        args: [{
                selector: 'ly-slider',
                template: "<div #bg [className]=\"classes.bg\"></div>\n<div #track [className]=\"classes.track\"></div>\n<ng-template [ngIf]=\"ticks\">\n  <ly-tick *ngFor=\"let tick of _tickList\" [value]=\"tick\"></ly-tick>\n</ng-template>\n<span #ticksRef></span>\n<ng-template [ngIf]=\"marks\">\n  <ng-content select=\"ly-mark\"></ng-content>\n</ng-template>\n<ng-template [ngIf]=\"_marksList\">\n  <ly-mark *ngFor=\"let mark of _marksList\" [value]=\"mark.value\">{{ mark.label }}</ly-mark>\n</ng-template>\n<div\n  *ngFor=\"let thumb of _thumbs; trackBy: _trackByFn\"\n  [className]=\"classes.thumbContainer\"\n  [ngStyle]=\"thumb.styles\"\n>\n  <div\n    [className]=\"classes.thumbContent\"\n    [ngClass]=\"thumb.focused ? classes.thumbContentFocused : null\"\n  >\n    <div\n      #thumbsRef\n      (focus)=\"_onFocus(thumb)\"\n      (blur)=\"_onBlur(thumb)\"\n      [attr.tabindex]=\"disabled ? -1 : 0\"\n      [className]=\"classes.thumb\"\n    ></div>\n    <div [className]=\"classes.thumbLabel\" *ngIf=\"thumbVisible !== false\">\n      <span [className]=\"classes.thumbLabelValue\">{{ thumb.displayValue }}</span>\n    </div>\n  </div>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                exportAs: 'lySlider',
                providers: [
                    LY_SLIDER_CONTROL_VALUE_ACCESSOR,
                    StyleRenderer
                ],
                host: {
                    '(slide)': '_onSlide($event)',
                    '(slideend)': '_onSlideEnd()',
                    '(tap)': '_onTap($event)'
                }
            }]
    }], function () { return [{ type: ɵngcc1.LyTheme2 }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.StyleRenderer }, { type: ɵngcc1.StyleRenderer }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [LY_SLIDER_DEFAULT_OPTIONS]
            }] }]; }, { change: [{
            type: Output
        }], input: [{
            type: Output
        }], valueChange: [{
            type: Output
        }], thumbVisible: [{
            type: Input
        }], marks: [{
            type: Input
        }], max: [{
            type: Input
        }], min: [{
            type: Input
        }], value: [{
            type: Input
        }], appearance: [{
            type: Input
        }], color: [{
            type: Input
        }], vertical: [{
            type: Input
        }], step: [{
            type: Input
        }], disabled: [{
            type: Input
        }], ticks: [{
            type: Input
        }], _bg: [{
            type: ViewChild,
            args: ['bg']
        }], _track: [{
            type: ViewChild,
            args: ['track', { static: true }]
        }], _ticksRef: [{
            type: ViewChild,
            args: ['ticksRef', { static: true }]
        }], _thumbsRef: [{
            type: ViewChildren,
            args: ['thumbsRef']
        }], displayWith: [{
            type: Input
        }] }); })();
function findClosest(values, currentValue) {
    const { index: closestIndex } = values.reduce((previousValue, value, index) => {
        const distance = Math.abs(currentValue - value);
        if (previousValue === null || distance < previousValue.distance || distance === previousValue.distance) {
            return {
                distance,
                index,
            };
        }
        return previousValue;
    }, null);
    return closestIndex;
}
export function гvalueToPercent(value, min, max) {
    return ((value - min) * 100) / (max - min);
}
function percentToValue(percent, min, max) {
    return (max - min) * (percent / 100) + min;
}
function arrayEquals(array1, array2) {
    return Array.isArray(array1) && Array.isArray(array2) && array1.length === array2.length
        && array1.every((value, index) => value === array2[index]);
}
function valueEquals(value, value2) {
    if (value === value2) {
        return true;
    }
    return arrayEquals(value, value2);
}
function clamp(value, min, max) {
    if (value < min) {
        return min;
    }
    if (value > max) {
        return max;
    }
    return value;
}
export function гbetween(x, min, max) {
    return x >= min && x <= max;
}
function ASC(a, b) {
    return a - b;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xpZGVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9saWIvc2xpZGVyL3NsaWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULHVCQUF1QixFQUN2QixVQUFVLEVBQ1YsU0FBUyxFQUNULEtBQUssRUFFTCxVQUFVLEVBQ1YsaUJBQWlCLEVBQ2pCLE1BQU0sRUFDTixZQUFZLEVBQ1osU0FBUyxFQUlULFlBQVksRUFDWixjQUFjLEVBQ2QsTUFBTSxFQUNOLFFBQVEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUNqQyxPQUFPLEVBQ0wsUUFBUSxFQUVSLFNBQVMsRUFDVCxnQkFBZ0IsRUFFaEIsUUFBUSxFQUNSLHVCQUF1QixFQUN2QixHQUFHLEVBQ0gsZUFBZSxFQUdmLElBQUksRUFFSixhQUFhLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFFbkMsT0FBTyxFQUFFLGlCQUFpQixFQUF3QixNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNCL0IsTUFBTSxDQUFDLE1BQU0seUJBQXlCLEdBQ2xDLElBQUksY0FBYyxDQUF5QiwyQkFBMkIsQ0FBQyxDQUFDO0FBTTVFLE1BQU0sQ0FBQyxNQUFNLGdDQUFnQyxHQUFHO0FBQ2hELElBQUUsT0FBTyxFQUFFLGlCQUFpQjtBQUM1QixJQUFFLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ3pDLElBQUUsS0FBSyxFQUFFLElBQUk7QUFDYixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMxQixNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxLQUF5QyxFQUFFLEdBQWEsRUFBRSxFQUFFO0FBQ25GLElB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QUFDNUQsSUFBRSxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUM5QixDQUFDO0FBRUQsU0FBUyxHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVM7QUFDakMsSUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDZixDQUFDO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBFbGVtZW50UmVmLFxuICBSZW5kZXJlcjIsXG4gIElucHV0LFxuICBPbkluaXQsXG4gIGZvcndhcmRSZWYsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgVmlld0NoaWxkLFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgUXVlcnlMaXN0LFxuICBWaWV3Q2hpbGRyZW4sXG4gIEluamVjdGlvblRva2VuLFxuICBJbmplY3QsXG4gIE9wdGlvbmFsfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIEx5VGhlbWUyLFxuICBUaGVtZVZhcmlhYmxlcyxcbiAgdG9Cb29sZWFuLFxuICBMWV9DT01NT05fU1RZTEVTLFxuICBIYW1tZXJJbnB1dCxcbiAgdG9OdW1iZXIsXG4gIHVudGlsQ29tcG9uZW50RGVzdHJveWVkLFxuICBEaXIsXG4gIFN0eWxlQ29sbGVjdGlvbixcbiAgTHlDbGFzc2VzLFxuICBTdHlsZVRlbXBsYXRlLFxuICBzdDJjLFxuICBUaGVtZVJlZixcbiAgU3R5bGVSZW5kZXJlciB9IGZyb20gJ0BhbHlsZS91aSc7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gJ0BhbHlsZS91aS9jb2xvcic7XG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiwgQ29udHJvbFZhbHVlQWNjZXNzb3IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTHlTbGlkZXJUaGVtZSB7XG4gIC8qKiBTdHlsZXMgZm9yIFNsaWRlciBDb21wb25lbnQgKi9cbiAgcm9vdD86IFN0eWxlQ29sbGVjdGlvbjwoKGNsYXNzZXM6IEx5Q2xhc3Nlczx0eXBlb2YgU1RZTEVTPikgPT4gU3R5bGVUZW1wbGF0ZSk+XG4gICAgfCAoKGNsYXNzZXM6IEx5Q2xhc3Nlczx0eXBlb2YgU1RZTEVTPikgPT4gU3R5bGVUZW1wbGF0ZSk7XG4gIGRpc2FibGVkPzogU3R5bGVDb2xsZWN0aW9uPCgoY2xhc3NlczogTHlDbGFzc2VzPHR5cGVvZiBTVFlMRVM+LCBjb2xvcjogQ29sb3IpID0+IFN0eWxlVGVtcGxhdGUpPlxuICB8ICgoY2xhc3NlczogTHlDbGFzc2VzPHR5cGVvZiBTVFlMRVM+LCBjb2xvcjogQ29sb3IpID0+IFN0eWxlVGVtcGxhdGUpO1xuICBjb2xvcj86IFN0eWxlQ29sbGVjdGlvbjwoKGNsYXNzZXM6IEx5Q2xhc3Nlczx0eXBlb2YgU1RZTEVTPiwgY29sb3I6IENvbG9yKSA9PiBTdHlsZVRlbXBsYXRlKT5cbiAgfCAoKGNsYXNzZXM6IEx5Q2xhc3Nlczx0eXBlb2YgU1RZTEVTPiwgY29sb3I6IENvbG9yKSA9PiBTdHlsZVRlbXBsYXRlKTtcbiAgYXBwZWFyYW5jZT86IHtcbiAgICBzdGFuZGFyZD86IFN0eWxlQ29sbGVjdGlvbjwoKGNsYXNzZXM6IEx5Q2xhc3Nlczx0eXBlb2YgU1RZTEVTPikgPT4gU3R5bGVUZW1wbGF0ZSk+XG4gICAgfCAoKGNsYXNzZXM6IEx5Q2xhc3Nlczx0eXBlb2YgU1RZTEVTPikgPT4gU3R5bGVUZW1wbGF0ZSk7XG4gICAgW2tleTogc3RyaW5nXTogU3R5bGVDb2xsZWN0aW9uPCgoY2xhc3NlczogTHlDbGFzc2VzPHR5cGVvZiBTVFlMRVM+KSA9PiBTdHlsZVRlbXBsYXRlKT5cbiAgICB8ICgoY2xhc3NlczogTHlDbGFzc2VzPHR5cGVvZiBTVFlMRVM+KSA9PiBTdHlsZVRlbXBsYXRlKSB8IHVuZGVmaW5lZDtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMeVNsaWRlckRlZmF1bHRPcHRpb25zIHtcbiAgYXBwZWFyYW5jZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IExZX1NMSURFUl9ERUZBVUxUX09QVElPTlMgPVxuICAgIG5ldyBJbmplY3Rpb25Ub2tlbjxMeVNsaWRlckRlZmF1bHRPcHRpb25zPignTFlfU0xJREVSX0RFRkFVTFRfT1BUSU9OUycpO1xuXG5leHBvcnQgaW50ZXJmYWNlIEx5U2xpZGVyVmFyaWFibGVzIHtcbiAgc2xpZGVyPzogTHlTbGlkZXJUaGVtZTtcbn1cblxuZXhwb3J0IGNvbnN0IExZX1NMSURFUl9DT05UUk9MX1ZBTFVFX0FDQ0VTU09SID0ge1xuICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTHlTbGlkZXIpLFxuICBtdWx0aTogdHJ1ZVxufTtcblxuY29uc3QgU1RZTEVfUFJJT1JJVFkgPSAtMjtcbmV4cG9ydCBjb25zdCBTVFlMRVMgPSAodGhlbWU6IFRoZW1lVmFyaWFibGVzICYgTHlTbGlkZXJWYXJpYWJsZXMsIHJlZjogVGhlbWVSZWYpID0+IHtcbiAgY29uc3QgX18gPSByZWYuc2VsZWN0b3JzT2YoU1RZTEVTKTtcbiAgY29uc3QgeyBiZWZvcmUgfSA9IHRoZW1lO1xuICByZXR1cm4ge1xuICAgICRwcmlvcml0eTogU1RZTEVfUFJJT1JJVFksXG4gICAgcm9vdDogKCkgPT4gKGNsYXNzTmFtZTogc3RyaW5nKSA9PiBgJHtjbGFzc05hbWV9e2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtjdXJzb3I6cG9pbnRlcjt9JHtzdDJjKChcbiAgICAgICAgICAodGhlbWUuc2xpZGVyXG4gICAgICAgICAgICAmJiB0aGVtZS5zbGlkZXIucm9vdFxuICAgICAgICAgICAgJiYgKHRoZW1lLnNsaWRlci5yb290IGluc3RhbmNlb2YgU3R5bGVDb2xsZWN0aW9uXG4gICAgICAgICAgICAgID8gdGhlbWUuc2xpZGVyLnJvb3Quc2V0VHJhbnNmb3JtZXIoZm4gPT4gZm4oX18pKS5jc3NcbiAgICAgICAgICAgICAgOiB0aGVtZS5zbGlkZXIucm9vdChfXykpXG4gICAgICAgICAgKSksIGAke2NsYXNzTmFtZX1gKX0ke3N0MmMoKExZX0NPTU1PTl9TVFlMRVMuZmlsbCksIGAke2NsYXNzTmFtZX0gJHtfXy5iZ31gKX0ke2NsYXNzTmFtZX0gJHtfXy5iZ317bWFyZ2luOmF1dG87fSR7Y2xhc3NOYW1lfSR7X18udGh1bWJWaXNpYmxlfSAke19fLnRodW1ifSwke2NsYXNzTmFtZX06bm90KCR7X18udGh1bWJOb3RWaXNpYmxlfSk6bm90KCR7X18uZGlzYWJsZWR9KSAke19fLnRodW1iQ29udGVudH06aG92ZXIgJHtfXy50aHVtYn0sJHtjbGFzc05hbWV9Om5vdCgke19fLnRodW1iTm90VmlzaWJsZX0pICR7X18udGh1bWJDb250ZW50fSR7X18udGh1bWJDb250ZW50Rm9jdXNlZH0gJHtfXy50aHVtYn17Ym9yZGVyLXJhZGl1czo1MCUgNTAlIDAlO30ke2NsYXNzTmFtZX0ke19fLnRodW1iVmlzaWJsZX0gJHtfXy50aHVtYkNvbnRlbnR9OjpiZWZvcmUsJHtjbGFzc05hbWV9Om5vdCgke19fLnRodW1iTm90VmlzaWJsZX0pOm5vdCgke19fLmRpc2FibGVkfSkgJHtfXy50aHVtYkNvbnRlbnR9OmhvdmVyOjpiZWZvcmUsJHtjbGFzc05hbWV9Om5vdCgke19fLnRodW1iTm90VmlzaWJsZX0pICR7X18udGh1bWJDb250ZW50fSR7X18udGh1bWJDb250ZW50Rm9jdXNlZH06OmJlZm9yZXt0cmFuc2Zvcm06c2NhbGUoMSk7fWAsXG5cbiAgICB0cmFjazogKGNsYXNzTmFtZTogc3RyaW5nKSA9PiBgJHtjbGFzc05hbWV9e3Bvc2l0aW9uOmFic29sdXRlO21hcmdpbjphdXRvO31gLFxuICAgIGJnOiBudWxsLFxuICAgIHRodW1iQ29udGFpbmVyOiAoY2xhc3NOYW1lOiBzdHJpbmcpID0+IGAke2NsYXNzTmFtZX17d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW46YXV0bzt9YCxcbiAgICB0aHVtYkNvbnRlbnQ6IChjbGFzc05hbWU6IHN0cmluZykgPT4gYCR7Y2xhc3NOYW1lfTo6YmVmb3Jle2NvbnRlbnQ6Jyc7cG9zaXRpb246YWJzb2x1dGU7b3BhY2l0eTouNjt0cmFuc2Zvcm06c2NhbGUoMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gJHtcbiAgICAgICAgICB0aGVtZS5hbmltYXRpb25zLmR1cmF0aW9ucy5lbnRlcmluZ31tcyAke3RoZW1lLmFuaW1hdGlvbnMuY3VydmVzLnNoYXJwfSAwbXMsIGJhY2tncm91bmQgJHtcbiAgICAgICAgICB0aGVtZS5hbmltYXRpb25zLmR1cmF0aW9ucy5jb21wbGV4fW1zICR7dGhlbWUuYW5pbWF0aW9ucy5jdXJ2ZXMuc2hhcnB9IDBtczt9YCxcbiAgICB0aHVtYjogKGNsYXNzTmFtZTogc3RyaW5nKSA9PiBgJHtjbGFzc05hbWV9e3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEycHg7aGVpZ2h0OjEycHg7bGVmdDotNnB4O3RvcDotNnB4O2JvcmRlci1yYWRpdXM6NTAlO291dGxpbmU6MDt0cmFuc2l0aW9uOiR7Wydib3JkZXItcmFkaXVzJ10ubWFwKHByb3AgPT4gYCR7cHJvcH0gJHtcbiAgICAgICAgdGhlbWUuYW5pbWF0aW9ucy5kdXJhdGlvbnMuZXhpdGluZ1xuICAgICAgfW1zICR7dGhlbWUuYW5pbWF0aW9ucy5jdXJ2ZXMuc3RhbmRhcmR9IDBtc2ApLmpvaW4oKX07fSR7Y2xhc3NOYW1lfTo6YmVmb3Jle2NvbnRlbnQ6Jyc7Ym9yZGVyLXJhZGl1czo1MCU7dHJhbnNpdGlvbjoke1snYm94LXNoYWRvdyddLm1hcChwcm9wID0+IGAke3Byb3B9ICR7XG4gICAgICAgICAgdGhlbWUuYW5pbWF0aW9ucy5kdXJhdGlvbnMuZW50ZXJpbmdcbiAgICAgICAgfW1zICR7dGhlbWUuYW5pbWF0aW9ucy5jdXJ2ZXMuc2hhcnB9IDBtc2ApLmpvaW4oKX07fSR7c3QyYygoTFlfQ09NTU9OX1NUWUxFUy5maWxsKSwgYCR7Y2xhc3NOYW1lfTo6YmVmb3JlYCl9YCxcbiAgICB0aHVtYkxhYmVsOiAoY2xhc3NOYW1lOiBzdHJpbmcpID0+IGAke2NsYXNzTmFtZX17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MjhweDtoZWlnaHQ6MjhweDtib3JkZXItcmFkaXVzOjUwJTt0b3A6LTE0cHg7JHtiZWZvcmV9Oi0xNHB4O3RyYW5zaXRpb246JHtbJ3RyYW5zZm9ybScsICd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3JkZXItcmFkaXVzJ10ubWFwKHByb3AgPT4gYCR7cHJvcH0gJHtcbiAgICAgICAgdGhlbWUuYW5pbWF0aW9ucy5kdXJhdGlvbnMuZW50ZXJpbmdcbiAgICAgIH1tcyAke3RoZW1lLmFuaW1hdGlvbnMuY3VydmVzLnNoYXJwfSAwbXNgKS5qb2luKCl9O31gLFxuICAgIHRodW1iTGFiZWxWYWx1ZTogKGNsYXNzTmFtZTogc3RyaW5nKSA9PiBgJHtjbGFzc05hbWV9e2Rpc3BsYXk6ZmxleDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiNmZmY7fWAsXG5cbiAgICBob3Jpem9udGFsOiAoKSA9PiAoY2xhc3NOYW1lOiBzdHJpbmcpID0+IGAke2NsYXNzTmFtZX17d2lkdGg6MTIwcHg7aGVpZ2h0OjJweDtwYWRkaW5nOjEwcHggMDt0b3VjaC1hY3Rpb246cGFuLXkgIWltcG9ydGFudDt9JHtjbGFzc05hbWV9ICR7X18udHJhY2t9LCR7Y2xhc3NOYW1lfSAke19fLmJnfXtoZWlnaHQ6MnB4O3dpZHRoOjEwMCU7fSR7Y2xhc3NOYW1lfSAke19fLnRyYWNrfXske2JlZm9yZX06MDt0b3A6MDtib3R0b206MDt9JHtjbGFzc05hbWV9ICR7X18udGh1bWJ9e3RyYW5zZm9ybTpyb3RhdGVaKC0xMzVkZWcpO30ke2NsYXNzTmFtZX0gJHtfXy50aHVtYkxhYmVsfXt0cmFuc2Zvcm06cm90YXRlWig0NWRlZykgc2NhbGUoMCk7fSR7Y2xhc3NOYW1lfSR7X18udGh1bWJWaXNpYmxlfSAke19fLnRodW1iTGFiZWx9LCR7Y2xhc3NOYW1lfTpub3QoJHtfXy5kaXNhYmxlZH0pICR7X18udGh1bWJDb250ZW50fTpob3ZlciAke19fLnRodW1iTGFiZWx9LCR7Y2xhc3NOYW1lfSAke19fLnRodW1iQ29udGVudH0ke19fLnRodW1iQ29udGVudEZvY3VzZWR9ICR7X18udGh1bWJMYWJlbH17Ym9yZGVyLXJhZGl1czo1MCUgNTAlIDAlO3RvcDotNTBweDt0cmFuc2Zvcm06cm90YXRlWig0NWRlZykgc2NhbGUoMSk7fSR7Y2xhc3NOYW1lfSAke19fLnRodW1iTGFiZWxWYWx1ZX17dHJhbnNmb3JtOnJvdGF0ZVooLTQ1ZGVnKTt9JHtjbGFzc05hbWV9ICR7X18udGh1bWJDb250YWluZXJ9e3RvcDowO2JvdHRvbTowO30ke2NsYXNzTmFtZX0gJHtfXy50aHVtYkNvbnRlbnR9OjpiZWZvcmV7d2lkdGg6MnB4O2hlaWdodDoyNHB4O2xlZnQ6LTFweDt0b3A6LTI0cHg7fSR7Y2xhc3NOYW1lfSAke19fLnRpY2t9e3dpZHRoOjJweDtoZWlnaHQ6aW5oZXJpdDt0b3A6MDtib3R0b206MDt9JHtjbGFzc05hbWV9ICR7X18ubWFya317dG9wOjIycHg7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoJHt0aGVtZS5kaXJlY3Rpb24gPT09IERpci5sdHIgPyAnLScgOiAnJ301MCUpO30ke2NsYXNzTmFtZX0ke19fLm1hcmtlZH17bWFyZ2luLWJvdHRvbToyNHB4O31gLFxuICAgIHZlcnRpY2FsOiAoKSA9PiAoY2xhc3NOYW1lOiBzdHJpbmcpID0+IGAke2NsYXNzTmFtZX17d2lkdGg6MnB4O2hlaWdodDoxMjBweDtwYWRkaW5nOjAgMTBweDt0b3VjaC1hY3Rpb246cGFuLXggIWltcG9ydGFudDt9JHtjbGFzc05hbWV9ICR7X18udHJhY2t9LCR7Y2xhc3NOYW1lfSAke19fLmJnfXtoZWlnaHQ6MTAwJTt3aWR0aDoycHg7fSR7Y2xhc3NOYW1lfSAke19fLnRyYWNrfXtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDt9JHtjbGFzc05hbWV9ICR7X18udGh1bWJ9e3RyYW5zZm9ybToke3RoZW1lLmRpcmVjdGlvbiA9PT0gRGlyLmx0ciA/ICdyb3RhdGVaKDEzNWRlZyknIDogJ3JvdGF0ZVooLTQ1ZGVnKSd9O30ke2NsYXNzTmFtZX0gJHtfXy50aHVtYkxhYmVsfXt0cmFuc2Zvcm06cm90YXRlWigtNDVkZWcpIHNjYWxlKDApO30ke2NsYXNzTmFtZX0ke19fLnRodW1iVmlzaWJsZX0gJHtfXy50aHVtYkxhYmVsfSwke2NsYXNzTmFtZX06bm90KCR7X18uZGlzYWJsZWR9KSAke19fLnRodW1iQ29udGVudH06aG92ZXIgJHtfXy50aHVtYkxhYmVsfSwke2NsYXNzTmFtZX0gJHtfXy50aHVtYkNvbnRlbnR9JHtfXy50aHVtYkNvbnRlbnRGb2N1c2VkfSAke19fLnRodW1iTGFiZWx9e2JvcmRlci1yYWRpdXM6JHt0aGVtZS5kaXJlY3Rpb24gPT09IERpci5sdHIgPyAnNTAlIDUwJSAwJScgOiAnMCA1MCUgNTAlIDUwJSd9OyR7YmVmb3JlfTotNTBweDt0cmFuc2Zvcm06cm90YXRlWigtNDVkZWcpIHNjYWxlKDEpO30ke2NsYXNzTmFtZX0gJHtfXy50aHVtYkxhYmVsVmFsdWV9e3RyYW5zZm9ybTpyb3RhdGVaKDQ1ZGVnKTt9JHtjbGFzc05hbWV9ICR7X18udGh1bWJDb250YWluZXJ9e2xlZnQ6MDtyaWdodDowO30ke2NsYXNzTmFtZX0gJHtfXy50aHVtYkNvbnRlbnR9OjpiZWZvcmV7d2lkdGg6MjRweDtoZWlnaHQ6MnB4OyR7YmVmb3JlfTotMjRweDt0b3A6LTFweDt9JHtjbGFzc05hbWV9ICR7X18udGlja317d2lkdGg6aW5oZXJpdDtoZWlnaHQ6MnB4O2xlZnQ6MDtyaWdodDowO30ke2NsYXNzTmFtZX0gJHtfXy5tYXJrfXske2JlZm9yZX06MjJweDt0cmFuc2Zvcm06dHJhbnNsYXRlWSg1MCUpO30ke2NsYXNzTmFtZX0ke19fLm1hcmtlZH17JHt0aGVtZS5kaXJlY3Rpb24gPT09IERpci5sdHIgPyAnbWFyZ2luLXJpZ2h0JyA6ICdtYXJnaW4tbGVmdCd9OjI0cHg7fWAsXG5cbiAgICBtYXJrZWQ6IG51bGwsXG4gICAgbWFyazogKGNsYXNzTmFtZTogc3RyaW5nKSA9PiBgJHtjbGFzc05hbWV9e3Bvc2l0aW9uOmFic29sdXRlO3doaXRlLXNwYWNlOm5vd3JhcDtmb250LXNpemU6MTRweDtjb2xvcjoke3RoZW1lLnRleHQuc2Vjb25kYXJ5fTt9YCxcbiAgICBtYXJrQWN0aXZlOiAoY2xhc3NOYW1lOiBzdHJpbmcpID0+IGAke2NsYXNzTmFtZX17Y29sb3I6Y3VycmVudENvbG9yO31gLFxuICAgIHRpY2s6IChjbGFzc05hbWU6IHN0cmluZykgPT4gYCR7Y2xhc3NOYW1lfXtwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW46YXV0bzt9YCxcbiAgICB0aWNrQWN0aXZlOiBudWxsLFxuXG4gICAgdGh1bWJWaXNpYmxlOiBudWxsLFxuICAgIHRodW1iTm90VmlzaWJsZTogbnVsbCxcbiAgICB0aHVtYkNvbnRlbnRGb2N1c2VkOiBudWxsLFxuICAgIHNsaWRpbmc6IG51bGwsXG4gICAgZGlzYWJsZWQ6IChjbGFzc05hbWU6IHN0cmluZykgPT4gYCR7Y2xhc3NOYW1lfXtjdXJzb3I6ZGVmYXVsdDt9YFxuICB9O1xufTtcblxuLyoqIEEgY2hhbmdlIGV2ZW50IGVtaXR0ZWQgYnkgdGhlIEx5U2xpZGVyIGNvbXBvbmVudC4gKi9cbmV4cG9ydCBjbGFzcyBMeVNsaWRlckNoYW5nZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICAvKiogVGhlIEx5U2xpZGVyIHRoYXQgY2hhbmdlZC4gKi9cbiAgICBwdWJsaWMgc291cmNlOiBMeVNsaWRlcixcbiAgICAvKiogVGhlIG5ldyB2YWx1ZSBvZiB0aGUgc291cmNlIHNsaWRlci4gKi9cbiAgICBwdWJsaWMgdmFsdWU6IG51bWJlciB8IChudW1iZXIgfCBudWxsKVtdIHwgbnVsbCxcbiAgKSB7IH1cbn1cblxuaW50ZXJmYWNlIFRodW1iIHtcbiAgdmFsdWU6IG51bWJlcjtcbiAgZGlzcGxheVZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsO1xuICBwZXJjZW50OiBudW1iZXIgfCBudWxsO1xuICBzdHlsZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIGZvY3VzZWQ/OiBib29sZWFuO1xuICBzbGlkaW5nPzogYm9vbGVhbjtcbiAgaW5kZXg6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMeVNsaWRlck1hcmsge1xuICB2YWx1ZTogbnVtYmVyO1xuICBsYWJlbDogbnVtYmVyIHwgc3RyaW5nO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdseS1zbGlkZXInLFxuICB0ZW1wbGF0ZVVybDogJ3NsaWRlci5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIGV4cG9ydEFzOiAnbHlTbGlkZXInLFxuICBwcm92aWRlcnM6IFtcbiAgICBMWV9TTElERVJfQ09OVFJPTF9WQUxVRV9BQ0NFU1NPUixcbiAgICBTdHlsZVJlbmRlcmVyXG4gIF0sXG4gIGhvc3Q6IHtcbiAgICAnKHNsaWRlKSc6ICdfb25TbGlkZSgkZXZlbnQpJyxcbiAgICAnKHNsaWRlZW5kKSc6ICdfb25TbGlkZUVuZCgpJyxcbiAgICAnKHRhcCknOiAnX29uVGFwKCRldmVudCknXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgTHlTbGlkZXIgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uSW5pdCwgT25EZXN0cm95LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XG5cbiAgLyoqIFdoZXRoZXIgb3Igbm90IHRvIHNob3cgdGhlIHRodW1iLiAqL1xuICBASW5wdXQoKVxuICBnZXQgdGh1bWJWaXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLl90aHVtYlZpc2libGU7XG4gIH1cbiAgc2V0IHRodW1iVmlzaWJsZSh2YWw6IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgY29uc3QgbmV3VmFsID0gdmFsICE9IG51bGwgPyB0b0Jvb2xlYW4odmFsKSA6IG51bGw7XG5cbiAgICBpZiAobmV3VmFsICE9PSB0aGlzLnRodW1iVmlzaWJsZSkge1xuXG4gICAgICBjb25zdCB7IHRodW1iVmlzaWJsZTogdGh1bWJWaXNpYmxlQ2xhc3MgfSA9IHRoaXMuY2xhc3NlcztcbiAgICAgIGNvbnN0IHsgdGh1bWJOb3RWaXNpYmxlOiB0aHVtYk5vdFZpc2libGVDbGFzcyB9ID0gdGhpcy5jbGFzc2VzO1xuICAgICAgdGhpcy5fdGh1bWJWaXNpYmxlID0gbmV3VmFsO1xuXG4gICAgICB0aGlzLnNSZW5kZXJlci50b2dnbGVDbGFzcyh0aHVtYlZpc2libGVDbGFzcywgbmV3VmFsID09PSB0cnVlKTtcbiAgICAgIHRoaXMuc1JlbmRlcmVyLnRvZ2dsZUNsYXNzKHRodW1iTm90VmlzaWJsZUNsYXNzLCBuZXdWYWwgPT09IGZhbHNlKTtcblxuICAgIH1cbiAgfVxuXG4gIC8qKiBXaGV0aGVyIG9yIG5vdCB0byBzaG93IHRoZSBtYXJrcywgYWxzbyBhY2NlcHRzIGFuIGFycmF5IG9mIG1hcmtzLiAqL1xuICBASW5wdXQoKVxuICBnZXQgbWFya3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21hcmtzO1xuICB9XG4gIHNldCBtYXJrcyh2YWw6IGJvb2xlYW4gfCBMeVNsaWRlck1hcmtbXSkge1xuICAgIGNvbnN0IG5ld1ZhbCA9IHRvQm9vbGVhbih2YWwpO1xuXG4gICAgaWYgKG5ld1ZhbCAhPT0gdGhpcy5tYXJrcykge1xuXG4gICAgICBjb25zdCBuZXdDbGFzcyA9IHRoaXMuY2xhc3Nlcy5tYXJrZWQ7XG5cbiAgICAgIGlmIChuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5fZWwubmF0aXZlRWxlbWVudCwgbmV3Q2xhc3MpO1xuICAgICAgICB0aGlzLl9tYXJrc0NsYXNzID0gbmV3Q2xhc3M7XG4gICAgICAgIHRoaXMuX21hcmtzID0gQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsIDogbmV3VmFsO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXJrc0NsYXNzKSB7XG4gICAgICAgIHRoaXMuX21hcmtzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuX2VsLm5hdGl2ZUVsZW1lbnQsIG5ld0NsYXNzKTtcbiAgICAgICAgdGhpcy5fbWFya3NDbGFzcyA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShuZXdWYWwpKSB7XG4gICAgICAgIHRoaXMuX21hcmtzTGlzdCA9IHZhbCBhcyBMeVNsaWRlck1hcmtbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21hcmtzTGlzdCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICAvKiogVGhlIG1heGltdW0gdmFsdWUgdGhhdCB0aGUgc2xpZGVyIGNhbiBoYXZlLiAqL1xuICBASW5wdXQoKVxuICBnZXQgbWF4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heDtcbiAgfVxuICBzZXQgbWF4KHY6IG51bWJlcikge1xuICAgIHRoaXMuX21heCA9IHRvTnVtYmVyKHYsIHRoaXMuX21heCk7XG4gICAgdGhpcy5fdXBkYXRlVGh1bWJzKCk7XG5cbiAgICB0aGlzLl9jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKiBUaGUgbWluaW11bSB2YWx1ZSB0aGF0IHRoZSBzbGlkZXIgY2FuIGhhdmUuICovXG4gIEBJbnB1dCgpXG4gIGdldCBtaW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWluO1xuICB9XG4gIHNldCBtaW4odjogbnVtYmVyKSB7XG4gICAgdGhpcy5fbWluID0gdG9OdW1iZXIodiwgdGhpcy5fbWluKTtcblxuICAgIC8vIElmIHRoZSB2YWx1ZSB3YXNuJ3QgZXhwbGljaXRseSBzZXQgYnkgdGhlIHVzZXIsIHNldCBpdCB0byB0aGUgbWluLlxuICAgIGlmICh0aGlzLl92YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX21pbjtcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlVGh1bWJzKCk7XG5cbiAgICB0aGlzLl9jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKiBUaGUgc2xpZGVyIGFwcGVhcmFuY2Ugc3R5bGUuICovXG4gIEBJbnB1dCgpXG4gIHNldCBhcHBlYXJhbmNlKHZhbDogc3RyaW5nKSB7XG4gICAgaWYgKHZhbCAhPT0gdGhpcy5hcHBlYXJhbmNlKSB7XG4gICAgICB0aGlzLl9hcHBlYXJhbmNlID0gdmFsO1xuICAgICAgdGhpcy5fYXBwZWFyYW5jZUNsYXNzID0gdGhpcy5fc3IuYWRkKFxuICAgICAgICBgJHtMeVNsaWRlci7QuH0uYXBwZWFyYW5jZToke3ZhbH1gLFxuICAgICAgICAodGhlbWU6IFRoZW1lVmFyaWFibGVzICYgTHlTbGlkZXJWYXJpYWJsZXMsIHJlZikgPT4ge1xuICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSByZWYuc2VsZWN0b3JzT2YoU1RZTEVTKTtcbiAgICAgICAgICBpZiAodGhlbWUuc2xpZGVyICYmIHRoZW1lLnNsaWRlci5hcHBlYXJhbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBhcHBlYXJhbmNlID0gdGhlbWUuc2xpZGVyLmFwcGVhcmFuY2VbdmFsXTtcbiAgICAgICAgICAgIGlmIChhcHBlYXJhbmNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhcHBlYXJhbmNlIGluc3RhbmNlb2YgU3R5bGVDb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgPyBhcHBlYXJhbmNlLnNldFRyYW5zZm9ybWVyKChfKSA9PiBfKGNsYXNzZXMpKS5jc3NcbiAgICAgICAgICAgICAgICA6IGFwcGVhcmFuY2UoY2xhc3NlcywgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3ZhbH0gbm90IGZvdW5kIGluIHRoZW1lLnNsaWRlci5hcHBlYXJhbmNlYCk7XG4gICAgICB9LCBTVFlMRV9QUklPUklUWSwgdGhpcy5fYXBwZWFyYW5jZUNsYXNzKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGFwcGVhcmFuY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FwcGVhcmFuY2U7XG4gIH1cblxuICAvKiogQ29sb3Igb2YgU2xpZGVyICovXG4gIEBJbnB1dCgpXG4gIGdldCBjb2xvcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jb2xvcjtcbiAgfVxuICBzZXQgY29sb3IodmFsOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jb2xvciA9IHZhbDtcbiAgICBjb25zdCBzdHlsZUtleSA9IGAke0x5U2xpZGVyLtC4fS5jb2xvcjoke3ZhbH1gO1xuXG4gICAgY29uc3QgbmV3U3R5bGUgPSAodGhlbWU6IFRoZW1lVmFyaWFibGVzICYgTHlTbGlkZXJWYXJpYWJsZXMsIHJlZjogVGhlbWVSZWYpID0+IHtcbiAgICAgIGNvbnN0IGNvbG9yID0gdGhlbWUuY29sb3JPZih2YWwpO1xuICAgICAgY29uc3QgX18gPSByZWYuc2VsZWN0b3JzT2YoU1RZTEVTKTtcblxuICAgICAgaWYgKHRoZW1lLnNsaWRlciAmJiB0aGVtZS5zbGlkZXIuY29sb3IpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVyQ29sb3IgPSB0aGVtZS5zbGlkZXIuY29sb3I7XG4gICAgICAgIGlmIChzbGlkZXJDb2xvcikge1xuICAgICAgICAgIHJldHVybiBzbGlkZXJDb2xvciBpbnN0YW5jZW9mIFN0eWxlQ29sbGVjdGlvblxuICAgICAgICAgICAgPyAoc2xpZGVyQ29sb3IpLnNldFRyYW5zZm9ybWVyKChfKSA9PiBfKF9fLCBjb2xvcikpLmNzc1xuICAgICAgICAgICAgOiBzbGlkZXJDb2xvcihfXywgY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dmFsfSBub3QgZm91bmQgaW4gdGhlbWUuc2xpZGVyLmNvbG9yYCk7XG4gICAgfTtcbiAgICB0aGlzLl9jb2xvckNsYXNzID0gdGhpcy5fc3IuYWRkKFxuICAgICAgc3R5bGVLZXksXG4gICAgICBuZXdTdHlsZSxcbiAgICAgIFNUWUxFX1BSSU9SSVRZICsgMSxcbiAgICAgIHRoaXMuX2NvbG9yQ2xhc3NcbiAgICApO1xuICB9XG5cbiAgLyoqIFdoZXRoZXIgdGhlIHNsaWRlciBpcyB2ZXJ0aWNhbC4gKi9cbiAgQElucHV0KClcbiAgZ2V0IHZlcnRpY2FsKCkge1xuICAgIHJldHVybiB0aGlzLl92ZXJ0aWNhbDtcbiAgfVxuICBzZXQgdmVydGljYWwodmFsOiBib29sZWFuKSB7XG4gICAgY29uc3QgbmV3VmFsID0gdG9Cb29sZWFuKHZhbCk7XG4gICAgdGhpcy5fdmVydGljYWwgPSBuZXdWYWw7XG5cbiAgICBjb25zdCBuZXdDbGFzcyA9IG5ld1ZhbFxuICAgICAgPyB0aGlzLmNsYXNzZXMudmVydGljYWxcbiAgICAgIDogdGhpcy5jbGFzc2VzLmhvcml6b250YWw7XG5cbiAgICB0aGlzLl92ZXJ0aWNhbENsYXNzID0gdGhpcy5fdGhlbWUudXBkYXRlQ2xhc3MoXG4gICAgICB0aGlzLl9lbC5uYXRpdmVFbGVtZW50LFxuICAgICAgdGhpcy5fcmVuZGVyZXIsXG4gICAgICBuZXdDbGFzcyxcbiAgICAgIHRoaXMuX3ZlcnRpY2FsQ2xhc3MgYXMgYW55KTtcbiAgICB0aGlzLl91cGRhdGVUaHVtYnMoKTtcblxuICAgIHRoaXMuX2NkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqIFRoZSB2YWx1ZXMgYXQgd2hpY2ggdGhlIHRodW1iIHdpbGwgc25hcC4gKi9cbiAgQElucHV0KClcbiAgZ2V0IHN0ZXAoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3N0ZXA7IH1cbiAgc2V0IHN0ZXAodjogbnVtYmVyKSB7XG4gICAgdGhpcy5fc3RlcCA9IHRvTnVtYmVyKHYsIHRoaXMuX3N0ZXApO1xuXG4gICAgdGhpcy5fc3RlcFByZWNpc2lvbiA9IHRoaXMuX3N0ZXAgJSAxICE9PSAwXG4gICAgICA/IHRoaXMuX3N0ZXAudG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdLmxlbmd0aFxuICAgICAgOiBudWxsO1xuXG4gICAgdGhpcy5fY2QubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogVmFsdWUgb2YgYSBzbGlkZXIsIHRoaXMgY2FuIGJlIGEgbnVtYmVyIG9yIGFuIGFycmF5IG9mIG51bWJlcnMuXG4gICAqIElmIHRoZSBhcnJheSBvZiBudW1iZXJzIGhhcyBtb3JlIHRoYW4gb25lIHZhbHVlLFxuICAgKiB0aGVuIHRoaXMgd2lsbCBjcmVhdGUgbW9yZSB0aHVtYnNcbiAgICovXG4gIEBJbnB1dCgpXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKHZhbDogbnVtYmVyIHwgKG51bWJlciB8IG51bGwpW10gfCBudWxsKSB7XG4gICAgaWYgKHZhbCAhPT0gdGhpcy5fdmFsdWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkodmFsKTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSBOdW1iZXIodmFsKTtcbiAgICAgICAgbmV3VmFsdWUgPSAobmV3VmFsdWUgPT09IHRoaXMubWluIHx8IG5ld1ZhbHVlID09PSB0aGlzLm1heClcbiAgICAgICAgICA/IG5ld1ZhbHVlXG4gICAgICAgICAgOiBwYXJzZUZsb2F0KG5ld1ZhbHVlLnRvRml4ZWQodGhpcy5fc3RlcFByZWNpc2lvbiBhcyBudW1iZXIpKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWVJc0FycmF5ICYmICFhcnJheUVxdWFscyh0aGlzLl92YWx1ZSwgdmFsKSkge1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSB2YWwgYXMgbnVtYmVyW107XG4gICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUubWFwKFxuICAgICAgICAgIF92YWwgPT4gX3ZhbCA9PT0gbnVsbFxuICAgICAgICAgICAgPyBfdmFsXG4gICAgICAgICAgICA6IChfdmFsID09PSB0aGlzLm1pbiB8fCBfdmFsID09PSB0aGlzLm1heClcbiAgICAgICAgICAgICAgPyBfdmFsXG4gICAgICAgICAgICAgIDogcGFyc2VGbG9hdChfdmFsLnRvRml4ZWQodGhpcy5fc3RlcFByZWNpc2lvbiBhcyBudW1iZXIpKSk7XG5cbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3RodW1icyA9ICh2YWx1ZUlzQXJyYXkgP1xuICAgICAgICB0aGlzLl92YWx1ZSBhcyAobnVtYmVyIHwgbnVsbClbXVxuICAgICAgICA6IFt0aGlzLl92YWx1ZSBhcyBudW1iZXIgfCBudWxsXSkubWFwKCh2LCBpbmRleCkgPT4gKHtcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICB2YWx1ZTogdG9OdW1iZXIodiwgdGhpcy5taW4pLFxuICAgICAgICAgIGRpc3BsYXlWYWx1ZTogbnVsbCxcbiAgICAgICAgICBwZXJjZW50OiBudWxsLFxuICAgICAgICAgIHN0eWxlczoge31cbiAgICAgICAgfSkpO1xuXG4gICAgICB0aGlzLl91cGRhdGVUaHVtYnMoKTtcblxuICAgICAgdGhpcy5fY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIFdoZXRoZXIgdGhlIHNsaWRlciBpcyBkaXNhYmxlZC4gKi9cbiAgQElucHV0KClcbiAgZ2V0IGRpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgfVxuICBzZXQgZGlzYWJsZWQodmFsOiBib29sZWFuKSB7XG4gICAgY29uc3QgbmV3VmFsID0gdG9Cb29sZWFuKHZhbCk7XG5cbiAgICBpZiAobmV3VmFsICE9PSB0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlZCA9IG5ld1ZhbDtcbiAgICAgIGlmIChuZXdWYWwpIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yO1xuICAgICAgICBjb25zdCBzdHlsZUtleSA9IGAke0x5U2xpZGVyLtC4fS5kaXNhYmxlZDoke3ZhbH0tJHtjb2xvcn1gO1xuICAgICAgICBsZXQgbmV3U3R5bGU6ICgodGhlbWU6IFRoZW1lVmFyaWFibGVzICYgTHlTbGlkZXJWYXJpYWJsZXMsIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGUpO1xuICAgICAgICBuZXdTdHlsZSA9ICh0aGVtZTogVGhlbWVWYXJpYWJsZXMgJiBMeVNsaWRlclZhcmlhYmxlcywgcmVmOiBUaGVtZVJlZikgPT4ge1xuICAgICAgICAgIGNvbnN0IGNsciA9IHRoZW1lLmNvbG9yT2YoY29sb3IpO1xuICAgICAgICAgIGNvbnN0IF9fID0gcmVmLnNlbGVjdG9yc09mKFNUWUxFUyk7XG5cbiAgICAgICAgICBpZiAodGhlbWUuc2xpZGVyICYmIHRoZW1lLnNsaWRlci5kaXNhYmxlZCkge1xuICAgICAgICAgICAgY29uc3Qgc2xpZGVyQ29sb3IgPSB0aGVtZS5zbGlkZXIuZGlzYWJsZWQ7XG4gICAgICAgICAgICBpZiAoc2xpZGVyQ29sb3IpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNsaWRlckNvbG9yIGluc3RhbmNlb2YgU3R5bGVDb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgPyAoc2xpZGVyQ29sb3IpLnNldFRyYW5zZm9ybWVyKChfKSA9PiBfKF9fLCBjbHIpKS5jc3NcbiAgICAgICAgICAgICAgICA6IHNsaWRlckNvbG9yKF9fLCBjbHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dmFsfSBub3QgZm91bmQgaW4gdGhlbWUuc2xpZGVyLmNvbG9yYCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG5ld0NsYXNzID0gdGhpcy5fc3IuYWRkKFxuICAgICAgICAgIHN0eWxlS2V5LFxuICAgICAgICAgIG5ld1N0eWxlLFxuICAgICAgICAgIFNUWUxFX1BSSU9SSVRZICsgMS41LFxuICAgICAgICAgIHRoaXMuX2Rpc2FibGVkQ2xhc3NcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zUmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRpc2FibGVkKTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWRDbGFzcyA9IG5ld0NsYXNzO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9kaXNhYmxlZENsYXNzKSB7XG4gICAgICAgIHRoaXMuc1JlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuX2Rpc2FibGVkQ2xhc3MpO1xuICAgICAgICB0aGlzLnNSZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuZGlzYWJsZWQpO1xuICAgICAgICB0aGlzLl9kaXNhYmxlZENsYXNzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdG8gc2hvdyB0aGUgdGh1bWIgbGFiZWwsIGJ1dCBpZiB0aGUgdmFsdWUgaXMgYSBudW1iZXIsXG4gICAqIGl0IHdpbGwgc2hvdyB0aWNrcyBhY2NvcmRpbmcgdG8gdGhlIHN0ZXBzLiBGb3IgZXhhbXBsZTogaWYgeW91IHNldFxuICAgKiAzIHRpY2tzIHdpdGggYSBzdGVwIG9mIDEwLCB5b3Ugd2lsbCBkcmF3IGEgdGljayBldmVyeSAzMCB2YWx1ZXNcbiAgICovXG4gIEBJbnB1dCgpXG4gIGdldCB0aWNrcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdGlja3M7XG4gIH1cbiAgc2V0IHRpY2tzKHZhbDogbnVtYmVyIHwgYm9vbGVhbikge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdG9OdW1iZXIodmFsLCB0b0Jvb2xlYW4odmFsKSk7XG4gICAgdGhpcy5fdGlja3MgPSBuZXdWYWx1ZTtcbiAgfVxuICBnZXQgX3RpY2tMaXN0KCkge1xuICAgIHJldHVybiB0aGlzLl9fdGlja0xpc3Q7XG4gIH1cbiAgLy8gcHJpdmF0ZSBfbmdDbGFzczogTmdDbGFzcztcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGhlbWU6IEx5VGhlbWUyLFxuICAgIHByaXZhdGUgX2VsOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgX3JlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHJpdmF0ZSBfY2Q6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHJlYWRvbmx5IHNSZW5kZXJlcjogU3R5bGVSZW5kZXJlcixcbiAgICBwcml2YXRlIF9zcjogU3R5bGVSZW5kZXJlcixcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KExZX1NMSURFUl9ERUZBVUxUX09QVElPTlMpIHByaXZhdGUgX2RlZmF1bHQ6IEx5U2xpZGVyRGVmYXVsdE9wdGlvbnNcbiAgKSB7XG4gICAgX3JlbmRlcmVyLmFkZENsYXNzKF9lbC5uYXRpdmVFbGVtZW50LCB0aGlzLmNsYXNzZXMucm9vdCk7XG4gIH1cbiAgc3RhdGljINC4ID0gJ0x5U2xpZGVyJztcbiAgcmVhZG9ubHkgY2xhc3NlcyA9IHRoaXMuX3RoZW1lLnJlbmRlclN0eWxlU2hlZXQoU1RZTEVTKTtcblxuICBwcml2YXRlIF9kaXNhYmxlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZGlzYWJsZWRDbGFzczogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBfY29sb3I6IHN0cmluZztcbiAgcHJpdmF0ZSBfY29sb3JDbGFzczogc3RyaW5nO1xuXG4gIHByaXZhdGUgX3ZlcnRpY2FsOiBib29sZWFuO1xuICBwcml2YXRlIF92ZXJ0aWNhbENsYXNzPzogc3RyaW5nIHwgbnVsbDtcblxuICBwcml2YXRlIF9hcHBlYXJhbmNlOiBzdHJpbmc7XG4gIHByaXZhdGUgX2FwcGVhcmFuY2VDbGFzczogc3RyaW5nO1xuXG4gIHByaXZhdGUgX3ZhbHVlOiBudW1iZXIgfCAobnVtYmVyIHwgbnVsbClbXSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF90aHVtYnNPblNsaWRlU3RhcnQ6IFRodW1iW10gfCBudWxsO1xuICBwcml2YXRlIF92YWx1ZU9uU2xpZGVTdGFydDogbnVtYmVyIHwgKG51bWJlciB8IG51bGwpW10gfCBudWxsO1xuXG4gIHByaXZhdGUgX21pbjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbWF4OiBudW1iZXIgPSAxMDA7XG5cbiAgcHJpdmF0ZSBfc3RlcDogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBfc3RlcFByZWNpc2lvbj86IG51bWJlciB8IG51bGw7XG5cbiAgcHJpdmF0ZSBfY2xvc2VzdEluZGV4OiBudW1iZXIgfCBudWxsO1xuICBwcml2YXRlIF9jdXJyZW50UmVjdDogRE9NUmVjdCB8IG51bGw7XG5cbiAgX2NoYW5nZXMgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIC8qKiBNaW4gcGVyY2VudGFnZSwgdGhpcyBpcyBmb3IgbWFyay4gKi9cbiAgX21pblBlcmNlbnQ6IG51bWJlcjtcbiAgLyoqIE1heCBwZXJjZW50YWdlLCB0aGlzIGlzIGZvciBtYXJrLiAqL1xuICBfbWF4UGVyY2VudDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGUgdGh1bWIgaXMgc2xpZGluZy5cbiAgICovXG4gIF9pc1NsaWRpbmc6IGJvb2xlYW47XG4gIF9zbGlkaW5nVGh1bWJWYWx1ZT86IG51bWJlciB8IG51bGw7XG5cbiAgX3RodW1iczogVGh1bWJbXSA9IFtdO1xuXG4gIF9yb290Q2xhc3NlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIEBWaWV3Q2hpbGQoJ2JnJykgX2JnPzogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XG4gIEBWaWV3Q2hpbGQoJ3RyYWNrJywgeyBzdGF0aWM6IHRydWUgfSkgX3RyYWNrOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcbiAgQFZpZXdDaGlsZCgndGlja3NSZWYnLCB7IHN0YXRpYzogdHJ1ZSB9KSBfdGlja3NSZWY6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+O1xuICBAVmlld0NoaWxkcmVuKCd0aHVtYnNSZWYnKSBfdGh1bWJzUmVmPzogUXVlcnlMaXN0PEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+PjtcblxuICBASW5wdXQoKSBkaXNwbGF5V2l0aDogKHZhbHVlOiBudW1iZXIgfCBudWxsKSA9PiBzdHJpbmcgfCBudW1iZXI7XG5cbiAgLyoqIEV2ZW50IGVtaXR0ZWQgd2hlbiB0aGUgc2xpZGVyIHZhbHVlIGhhcyBjaGFuZ2VkLiAqL1xuICBAT3V0cHV0KCkgcmVhZG9ubHkgY2hhbmdlOiBFdmVudEVtaXR0ZXI8THlTbGlkZXJDaGFuZ2U+ID0gbmV3IEV2ZW50RW1pdHRlcjxMeVNsaWRlckNoYW5nZT4oKTtcblxuICAvKiogRXZlbnQgZW1pdHRlZCB3aGVuIHRoZSBzbGlkZXIgdGh1bWIgbW92ZXMuICovXG4gIEBPdXRwdXQoKSByZWFkb25seSBpbnB1dDogRXZlbnRFbWl0dGVyPEx5U2xpZGVyQ2hhbmdlPiA9IG5ldyBFdmVudEVtaXR0ZXI8THlTbGlkZXJDaGFuZ2U+KCk7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgQE91dHB1dCgpIHJlYWRvbmx5IHZhbHVlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyIHwgKG51bWJlciB8IG51bGwpW10gfCBudWxsPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyIHwgKG51bWJlciB8IG51bGwpW10gfCBudWxsPigpO1xuXG4gIHByaXZhdGUgX3RodW1iVmlzaWJsZTogYm9vbGVhbiB8IG51bGw7XG5cbiAgcHJpdmF0ZSBfbWFya3M6IGJvb2xlYW4gfCBMeVNsaWRlck1hcmtbXTtcbiAgcHJpdmF0ZSBfbWFya3NDbGFzczogc3RyaW5nIHwgbnVsbDtcbiAgX21hcmtzTGlzdD86IEx5U2xpZGVyTWFya1tdIHwgbnVsbDtcbiAgcHJpdmF0ZSBfdGlja3M6IG51bWJlciB8IGJvb2xlYW47XG4gIF90aWNrSW50ZXJ2YWw6IG51bWJlcjtcbiAgcHJpdmF0ZSBfX3RpY2tMaXN0OiBudW1iZXJbXTtcblxuICAvKipcbiAgICogVGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIHdoZW4gYSBibHVyIGV2ZW50IG9jY3VycyBvbiB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICogQGRvY3MtcHJpdmF0ZVxuICAgKi9cbiAgb25Ub3VjaGVkID0gKCkgPT4ge307XG5cbiAgcHJpdmF0ZSBfY29udHJvbFZhbHVlQWNjZXNzb3JDaGFuZ2VGbjogKHZhbHVlOiBhbnkpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICB0aGlzLl91cGRhdGVUaWNrVmFsdWVzKCk7XG4gICAgdGhpcy5fY2hhbmdlcy5uZXh0KCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcblxuICAgIHRoaXMuX3RoZW1lLmRpcmVjdGlvbkNoYW5nZWQucGlwZSh1bnRpbENvbXBvbmVudERlc3Ryb3llZCh0aGlzKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMubmdPbkNoYW5nZXMoKTtcbiAgICAgIHRoaXMuX3VwZGF0ZVRodW1icygpO1xuICAgICAgdGhpcy5fY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfSk7XG5cbiAgICAvKiogU2V0IGRlZmF1bHQgYXBwZWFyYW5jZSAqL1xuICAgIGlmICh0aGlzLmFwcGVhcmFuY2UgPT0gbnVsbCkge1xuICAgICAgdGhpcy5hcHBlYXJhbmNlID0gKHRoaXMuX2RlZmF1bHQgJiYgdGhpcy5fZGVmYXVsdC5hcHBlYXJhbmNlKSB8fCAnc3RhbmRhcmQnO1xuICAgIH1cblxuICAgIC8qKiBTZXQgaG9yaXpvbnRhbCBzbGlkZXIgKi9cbiAgICBpZiAodGhpcy52ZXJ0aWNhbCA9PSBudWxsKSB7XG4gICAgICB0aGlzLnZlcnRpY2FsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqIFNldCBkZWZhdWx0IGNvbG9yICovXG4gICAgaWYgKHRoaXMuY29sb3IgPT0gbnVsbCkge1xuICAgICAgdGhpcy5jb2xvciA9ICdhY2NlbnQnO1xuICAgIH1cblxuICAgIC8qKiBTZXQgZGVmYXVsdCBzdGVwICovXG4gICAgaWYgKHRoaXMuc3RlcCA9PSBudWxsKSB7XG4gICAgICB0aGlzLnN0ZXAgPSAxO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX2NoYW5nZXMuY29tcGxldGUoKTtcbiAgfVxuXG4gIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLl9jaGFuZ2VzLm5leHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBmdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCB2YWx1ZSBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0gZm4gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAodmFsdWU6IGFueSkgPT4gYW55KTogdm9pZCB7XG4gICAgdGhpcy5fY29udHJvbFZhbHVlQWNjZXNzb3JDaGFuZ2VGbiA9IGZuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIGlzIHRvdWNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSBmbiBUaGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGVzIHRoZSBzZWxlY3QuIFBhcnQgb2YgdGhlIENvbnRyb2xWYWx1ZUFjY2Vzc29yIGludGVyZmFjZSByZXF1aXJlZFxuICAgKiB0byBpbnRlZ3JhdGUgd2l0aCBBbmd1bGFyJ3MgY29yZSBmb3JtcyBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSBpc0Rpc2FibGVkIFNldHMgd2hldGhlciB0aGUgY29tcG9uZW50IGlzIGRpc2FibGVkLlxuICAgKi9cbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gIH1cblxuICBfb25Gb2N1cyh0aHVtYjogVGh1bWIpIHtcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHRodW1iLmZvY3VzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIF9vbkJsdXIodGh1bWI6IFRodW1iKSB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aHVtYi5mb2N1c2VkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX29uVGFwKGV2ZW50OiBIYW1tZXJJbnB1dCkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N0YXJ0U2xpZGUoKTtcbiAgICB0aGlzLl91cGRhdGVWYWx1ZUZyb21Qb3NpdGlvbihldmVudC5jZW50ZXIueCwgZXZlbnQuY2VudGVyLnkpO1xuICAgIHRoaXMuX29uU2xpZGVFbmQoKTtcbiAgfVxuXG4gIF9vblNsaWRlKGV2ZW50OiBIYW1tZXJJbnB1dCkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhcnRTbGlkZSgpO1xuXG4gICAgaWYgKGV2ZW50Wydpc0ZpbmFsJ10pIHtcbiAgICAgIGlmIChldmVudFsncG9pbnRlclR5cGUnXSA9PT0gJ3RvdWNoJyAmJiBldmVudC5jZW50ZXIueCA9PT0gMCAmJiBldmVudC5jZW50ZXIueSA9PT0gMCkge1xuICAgICAgICAvLyByZXN0b3JlIHRvIGluaXRpYWwgcG9zaXRpb25cbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX3ZhbHVlT25TbGlkZVN0YXJ0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlVmFsdWVGcm9tUG9zaXRpb24oZXZlbnQuY2VudGVyLngsIGV2ZW50LmNlbnRlci55KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX29uU2xpZGVFbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlVmFsdWVGcm9tUG9zaXRpb24oZXZlbnQuY2VudGVyLngsIGV2ZW50LmNlbnRlci55KTtcbiAgICB9XG5cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9lbWl0SW5wdXRFdmVudCgpO1xuICAgIHRoaXMuX2NoYW5nZXMubmV4dCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnRTbGlkZSgpIHtcbiAgICBpZiAoIXRoaXMuX2lzU2xpZGluZykge1xuICAgICAgdGhpcy5faXNTbGlkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKHRoaXMuX2VsLm5hdGl2ZUVsZW1lbnQsIHRoaXMuY2xhc3Nlcy5zbGlkaW5nKTtcblxuICAgICAgLy8gY2xvbmVcbiAgICAgIHRoaXMuX3ZhbHVlT25TbGlkZVN0YXJ0ID0gQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSA/IHRoaXMudmFsdWUuc2xpY2UoMCkgOiB0aGlzLnZhbHVlO1xuXG4gICAgICB0aGlzLl90aHVtYnNPblNsaWRlU3RhcnQgPSB0aGlzLl90aHVtYnMuc2xpY2UoMCkubWFwKHQgPT4gKHsuLi50fSkpO1xuICAgICAgdGhpcy5fY3VycmVudFJlY3QgPSB0aGlzLl9iZyEubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSBhcyBET01SZWN0O1xuICAgIH1cbiAgfVxuXG4gIF9vblNsaWRlRW5kKCkge1xuICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5fZWwubmF0aXZlRWxlbWVudCwgdGhpcy5jbGFzc2VzLnNsaWRpbmcpO1xuXG4gICAgICBpZiAoIXZhbHVlRXF1YWxzKHRoaXMuX3ZhbHVlT25TbGlkZVN0YXJ0LCB0aGlzLnZhbHVlKSAmJiAhdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICB0aGlzLl9lbWl0Q2hhbmdlRXZlbnQoKTtcbiAgICAgICAgdGhpcy5fY2hhbmdlcy5uZXh0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLl90aHVtYnNPblNsaWRlU3RhcnQgPSBudWxsO1xuICAgICAgdGhpcy5fdmFsdWVPblNsaWRlU3RhcnQgPSBudWxsO1xuICAgICAgdGhpcy5fY2xvc2VzdEluZGV4ID0gbnVsbDtcbiAgICAgIHRoaXMuX2N1cnJlbnRSZWN0ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBfdHJhY2tCeUZuKF9pbmRleDogbnVtYmVyLCBpdGVtOiBUaHVtYikge1xuICAgIHJldHVybiBpdGVtLmluZGV4O1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVmFsdWVGcm9tUG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBpZiAoIXRoaXMuX2JnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdyA9IHRoaXMuX2N1cnJlbnRSZWN0IS53aWR0aDtcbiAgICBjb25zdCBoID0gdGhpcy5fY3VycmVudFJlY3QhLmhlaWdodDtcbiAgICB4IC09IHRoaXMuX2N1cnJlbnRSZWN0IS54O1xuICAgIHkgLT0gdGhpcy5fY3VycmVudFJlY3QhLnk7XG5cbiAgICBsZXQgcGVyY2VudCA9IGNsYW1wKFxuICAgICAgdGhpcy52ZXJ0aWNhbFxuICAgICAgICA/INCzdmFsdWVUb1BlcmNlbnQoeSwgMCwgaClcbiAgICAgICAgOiDQs3ZhbHVlVG9QZXJjZW50KHgsIDAsIHcpLFxuICAgICAgMCxcbiAgICAgIDEwMCk7XG5cbiAgICBpZiAodGhpcy52ZXJ0aWNhbCB8fCAoIXRoaXMudmVydGljYWwgJiYgdGhpcy5fdGhlbWUudmFyaWFibGVzLmRpcmVjdGlvbiA9PT0gRGlyLnJ0bCkpIHtcbiAgICAgIHBlcmNlbnQgPSAxMDAgLSBwZXJjZW50O1xuICAgIH1cblxuICAgIGxldCB2YWx1ZTogbnVtYmVyO1xuXG4gICAgaWYgKHBlcmNlbnQgPT09IDApIHtcbiAgICAgIHZhbHVlID0gdGhpcy5taW47XG4gICAgfSBlbHNlIGlmIChwZXJjZW50ID09PSAxMDApIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tYXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gdGhpcy5fcm91bmRWYWx1ZVRvU3RlcChwZXJjZW50VG9WYWx1ZShwZXJjZW50LCB0aGlzLm1pbiwgdGhpcy5tYXgpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2Nsb3Nlc3RJbmRleCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9jbG9zZXN0SW5kZXggPSBmaW5kQ2xvc2VzdCh0aGlzLl90aHVtYnMubWFwKHRodW1iID0+IHRodW1iLnZhbHVlKSwgdmFsdWUpO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50VGh1bWIgPSB0aGlzLl90aHVtYnNPblNsaWRlU3RhcnQhW3RoaXMuX2Nsb3Nlc3RJbmRleF07XG4gICAgdGhpcy5fc2xpZGluZ1RodW1iVmFsdWUgPSBjdXJyZW50VGh1bWIudmFsdWUgPSB2YWx1ZTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX3RodW1ic09uU2xpZGVTdGFydCEubWFwKHRodW1iID0+IHRodW1iLnZhbHVlKS5zb3J0KEFTQyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBmb2N1cyBzbGlkaW5nVGh1bWJcbiAgICBjb25zdCBjdXJyZW50U2xpZGluZ1RodW1iOiBUaHVtYiB8IHVuZGVmaW5lZCA9IHRoaXMuX3RodW1icy5maW5kKHRodW1iID0+IHRodW1iLnZhbHVlID09PSB2YWx1ZSkhO1xuICAgIGlmIChjdXJyZW50U2xpZGluZ1RodW1iKSB7XG4gICAgICBjdXJyZW50U2xpZGluZ1RodW1iLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fdGh1bWJzUmVmIS50b0FycmF5KClbY3VycmVudFNsaWRpbmdUaHVtYi5pbmRleF0ubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVRodW1icygpIHtcbiAgICB0aGlzLl90aHVtYnMuZm9yRWFjaCh0aHVtYiA9PiB7XG4gICAgICBjb25zdCB2YWwgPSBjbGFtcCh0aHVtYi52YWx1ZSwgdGhpcy5taW4sIHRoaXMubWF4KTtcbiAgICAgIGNvbnN0IHBlcmNlbnQgPSDQs3ZhbHVlVG9QZXJjZW50KHZhbCwgdGhpcy5taW4sIHRoaXMubWF4KTtcbiAgICAgIGNvbnN0IHBvcyA9IHRoaXMuX2NhbGN1bGF0ZVBvc2l0aW9uKHBlcmNlbnQpO1xuICAgICAgdGh1bWIudmFsdWUgPSB2YWw7XG4gICAgICB0aHVtYi5kaXNwbGF5VmFsdWUgPSB0aGlzLl90cmFuc2Zvcm1WYWx1ZSh2YWwpO1xuICAgICAgdGh1bWIucGVyY2VudCA9IHBlcmNlbnQ7XG4gICAgICB0aHVtYi5mb2N1c2VkID0gZmFsc2U7XG4gICAgICB0aHVtYi5zdHlsZXMgPSB7XG4gICAgICAgIFtwb3Muc3R5bGVdOiBwb3MudmFsdWVcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICB0aGlzLl91cGRhdGVUcmFjaygpO1xuICB9XG5cbiAgX2NhbGN1bGF0ZVBvc2l0aW9uKHBlcmNlbnQ6IG51bWJlcikge1xuICAgIGxldCBzdHlsZTogc3RyaW5nO1xuICAgIGNvbnN0IHZhbHVlID0gYCR7cGVyY2VudH0lYDtcblxuICAgIGlmICh0aGlzLnZlcnRpY2FsKSB7XG4gICAgICBzdHlsZSA9ICdib3R0b20nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZSA9IHRoaXMuX3RoZW1lLnZhcmlhYmxlcy5kaXJlY3Rpb24gPT09ICdydGwnID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0eWxlLFxuICAgICAgdmFsdWVcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVHJhY2soKSB7XG4gICAgY29uc3QgdHJhY2sgPSB0aGlzLl90cmFjaztcbiAgICBjb25zdCB0aHVtYnMgPSB0aGlzLl90aHVtYnM7XG4gICAgY29uc3QgdGh1bWJzUGVyY2VudHMgPSB0aHVtYnMubWFwKHRodW1iID0+IHRodW1iLnBlcmNlbnQhKTtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLl90aGVtZS52YXJpYWJsZXMuZGlyZWN0aW9uID09PSAncnRsJyA/ICdyaWdodCcgOiAnbGVmdCc7XG5cbiAgICBpZiAodGh1bWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGh1bWJzUGVyY2VudHMudW5zaGlmdCgwKTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5QZXJjZW50ID0gdGhpcy5fbWluUGVyY2VudCA9IE1hdGgubWluKC4uLnRodW1ic1BlcmNlbnRzKTtcbiAgICBjb25zdCBtYXhQZXJjZW50ID0gdGhpcy5fbWF4UGVyY2VudCA9IE1hdGgubWF4KC4uLnRodW1ic1BlcmNlbnRzKTtcblxuICAgIGlmICh0cmFjaykge1xuXG4gICAgICB0cmFjay5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gbnVsbCE7XG4gICAgICB0cmFjay5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IG51bGwhO1xuICAgICAgdHJhY2submF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gbnVsbCE7XG4gICAgICB0cmFjay5uYXRpdmVFbGVtZW50LnN0eWxlLnJpZ2h0ID0gbnVsbCE7XG5cbiAgICAgIGlmICh0aGlzLnZlcnRpY2FsKSB7XG4gICAgICAgIHRyYWNrLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7KG1heFBlcmNlbnQgLSBtaW5QZXJjZW50KX0lYDtcbiAgICAgICAgdHJhY2submF0aXZlRWxlbWVudC5zdHlsZS5ib3R0b20gPSBgJHttaW5QZXJjZW50fSVgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhY2submF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke21heFBlcmNlbnQgLSBtaW5QZXJjZW50fSVgO1xuICAgICAgICB0cmFjay5uYXRpdmVFbGVtZW50LnN0eWxlW2RpcmVjdGlvbl0gPSBgJHttaW5QZXJjZW50fSVgO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBFbWl0cyBhIGNoYW5nZSBldmVudC4gKi9cbiAgcHJpdmF0ZSBfZW1pdENoYW5nZUV2ZW50KCkge1xuICAgIHRoaXMuX2NvbnRyb2xWYWx1ZUFjY2Vzc29yQ2hhbmdlRm4odGhpcy52YWx1ZSk7XG4gICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMudmFsdWUpO1xuICAgIHRoaXMuY2hhbmdlLmVtaXQodGhpcy5fY3JlYXRlQ2hhbmdlRXZlbnQoKSk7XG4gIH1cblxuICAvKiogRW1pdHMgYW4gaW5wdXQgZXZlbnQuICovXG4gIHByaXZhdGUgX2VtaXRJbnB1dEV2ZW50KCkge1xuICAgIHRoaXMuaW5wdXQuZW1pdCh0aGlzLl9jcmVhdGVDaGFuZ2VFdmVudCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUNoYW5nZUV2ZW50KHZhbHVlID0gdGhpcy52YWx1ZSkge1xuICAgIHJldHVybiBuZXcgTHlTbGlkZXJDaGFuZ2UodGhpcywgdmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcm91bmRWYWx1ZVRvU3RlcCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIE51bWJlcigoTWF0aC5yb3VuZCh2YWx1ZSAvIHRoaXMuc3RlcCkgKiB0aGlzLnN0ZXApLnRvRml4ZWQodGhpcy5fc3RlcFByZWNpc2lvbiEpKTtcbiAgfVxuXG4gIHByaXZhdGUgX3RyYW5zZm9ybVZhbHVlKHZhbHVlOiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5kaXNwbGF5V2l0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheVdpdGgodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBfZ2V0SG9zdEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VsLm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVUaWNrVmFsdWVzKCkge1xuICAgIHRoaXMuX190aWNrTGlzdCA9IFtdO1xuICAgIGlmICghdGhpcy50aWNrcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgICB0aGlzLl90aWNrSW50ZXJ2YWwgPSB0eXBlb2YgdGlja3MgPT09ICdudW1iZXInXG4gICAgICAgID8gdGhpcy5zdGVwICogdGlja3NcbiAgICAgICAgOiB0aGlzLnN0ZXA7XG5cbiAgICAgIHRoaXMuX190aWNrTGlzdCA9IFtdO1xuICAgICAgY29uc3QgdGlja0ludGVydmFscyA9IHRoaXMuX3RpY2tJbnRlcnZhbCArIDE7XG4gICAgICBjb25zdCBzdGVwV2l0aCA9IHRoaXMuX3RpY2tJbnRlcnZhbDtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aWNrSW50ZXJ2YWxzOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMuX190aWNrTGlzdC5wdXNoKGNsYW1wKGluZGV4ICogc3RlcFdpdGgsIHRoaXMubWluLCB0aGlzLm1heCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NkLm1hcmtGb3JDaGVjaygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRDbG9zZXN0KHZhbHVlczogbnVtYmVyW10sIGN1cnJlbnRWYWx1ZTogbnVtYmVyKSB7XG4gIGNvbnN0IHsgaW5kZXg6IGNsb3Nlc3RJbmRleCB9ID0gdmFsdWVzLnJlZHVjZTx7XG4gICAgZGlzdGFuY2U6IG51bWJlclxuICAgIGluZGV4OiBudW1iZXJcbiAgfSB8IG51bGw+KChwcmV2aW91c1ZhbHVlLCB2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJlbnRWYWx1ZSAtIHZhbHVlKTtcblxuICAgIGlmIChwcmV2aW91c1ZhbHVlID09PSBudWxsIHx8IGRpc3RhbmNlIDwgcHJldmlvdXNWYWx1ZS5kaXN0YW5jZSB8fCBkaXN0YW5jZSA9PT0gcHJldmlvdXNWYWx1ZS5kaXN0YW5jZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGlzdGFuY2UsXG4gICAgICAgIGluZGV4LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldmlvdXNWYWx1ZTtcbiAgfSwgbnVsbCkhO1xuICByZXR1cm4gY2xvc2VzdEluZGV4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24g0LN2YWx1ZVRvUGVyY2VudCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgcmV0dXJuICgodmFsdWUgLSBtaW4pICogMTAwKSAvIChtYXggLSBtaW4pO1xufVxuXG5mdW5jdGlvbiBwZXJjZW50VG9WYWx1ZShwZXJjZW50LCBtaW4sIG1heCkge1xuICByZXR1cm4gKG1heCAtIG1pbikgKiAocGVyY2VudCAvIDEwMCkgKyBtaW47XG59XG5cbmZ1bmN0aW9uIGFycmF5RXF1YWxzKGFycmF5MTogYW55LCBhcnJheTI6IGFueSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnJheTEpICYmIEFycmF5LmlzQXJyYXkoYXJyYXkyKSAmJiBhcnJheTEubGVuZ3RoID09PSBhcnJheTIubGVuZ3RoXG4gICAgJiYgYXJyYXkxLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSBhcnJheTJbaW5kZXhdKTtcbn1cblxuZnVuY3Rpb24gdmFsdWVFcXVhbHModmFsdWU6IG51bWJlciB8IChudW1iZXIgfCBudWxsKVtdIHwgbnVsbCwgdmFsdWUyOiBudW1iZXIgfCAobnVtYmVyIHwgbnVsbClbXSB8IG51bGwpIHtcbiAgaWYgKHZhbHVlID09PSB2YWx1ZTIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gYXJyYXlFcXVhbHModmFsdWUsIHZhbHVlMik7XG59XG5cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICBpZiAodmFsdWUgPCBtaW4pIHtcbiAgICByZXR1cm4gbWluO1xuICB9XG4gIGlmICh2YWx1ZSA+IG1heCkge1xuICAgIHJldHVybiBtYXg7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24g0LNiZXR3ZWVuKHg6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gIHJldHVybiB4ID49IG1pbiAmJiB4IDw9IG1heDtcbn1cblxuZnVuY3Rpb24gQVNDKGE6IG51bWJlciwgYjogbnVtYmVyKSB7XG4gIHJldHVybiBhIC0gYjtcbn1cbiJdfQ==