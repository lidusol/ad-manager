(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('@angular/core'),exports, require('@angular/core'), require('@angular/common'), require('rxjs'), require('rxjs/operators'), require('firebase/app')) :
    typeof define === 'function' && define.amd ? define(['@angular/core','exports', '@angular/core', '@angular/common', 'rxjs', 'rxjs/operators', 'firebase/app'], factory) :
    (factory(global.ng.core,(global.angularfire2 = {}),global.ng.core,global.ng.common,global.rxjs,global.rxjs.operators,global.firebase));
}(this, (function (ɵngcc0,exports,core,common,rxjs,operators,firebase) { 'use strict';

    firebase = firebase && firebase.hasOwnProperty('default') ? firebase['default'] : firebase;

    var RealtimeDatabaseURL = new core.InjectionToken('angularfire2.realtimeDatabaseURL');
    var DATABASE_URL = RealtimeDatabaseURL;
    function noop() { }
    var ɵZoneScheduler = (function () {
        function ɵZoneScheduler(zone, delegate) {
            if (delegate === void 0) { delegate = rxjs.queueScheduler; }
            this.zone = zone;
            this.delegate = delegate;
        }
        ɵZoneScheduler.prototype.now = function () {
            return this.delegate.now();
        };
        ɵZoneScheduler.prototype.schedule = function (work, delay, state) {
            var targetZone = this.zone;
            var workInZone = function (state) {
                var _this = this;
                targetZone.runGuarded(function () {
                    work.apply(_this, [state]);
                });
            };
            return this.delegate.schedule(workInZone, delay, state);
        };
        return ɵZoneScheduler;
    }());
    var ɵBlockUntilFirstOperator = (function () {
        function ɵBlockUntilFirstOperator(zone) {
            this.zone = zone;
            this.task = null;
        }
        ɵBlockUntilFirstOperator.prototype.call = function (subscriber, source) {
            var unscheduleTask = this.unscheduleTask.bind(this);
            this.task = this.zone.run(function () { return Zone.current.scheduleMacroTask('firebaseZoneBlock', noop, {}, noop, noop); });
            return source.pipe(operators.tap(unscheduleTask, unscheduleTask, unscheduleTask)).subscribe(subscriber).add(unscheduleTask);
        };
        ɵBlockUntilFirstOperator.prototype.unscheduleTask = function () {
            if (this.task != null && this.task.state === 'scheduled') {
                this.task.invoke();
                this.task = null;
            }
        };
        return ɵBlockUntilFirstOperator;
    }());
    var ɵAngularFireSchedulers = (function () {
        function ɵAngularFireSchedulers(ngZone) {
            this.ngZone = ngZone;
            this.outsideAngular = ngZone.runOutsideAngular(function () { return new ɵZoneScheduler(Zone.current); });
            this.insideAngular = ngZone.run(function () { return new ɵZoneScheduler(Zone.current, rxjs.asyncScheduler); });
        }
        return ɵAngularFireSchedulers;
    }());
    function ɵkeepUnstableUntilFirstFactory(schedulers, platformId) {
        return function keepUnstableUntilFirst(obs$) {
            if (common.isPlatformServer(platformId)) {
                obs$ = obs$.lift(new ɵBlockUntilFirstOperator(schedulers.ngZone));
            }
            return obs$.pipe(operators.subscribeOn(schedulers.outsideAngular), operators.observeOn(schedulers.insideAngular));
        };
    }
    var runOutsideAngular = function (zone) { return function (obs$) {
        return new rxjs.Observable(function (subscriber) {
            return zone.runOutsideAngular(function () {
                runInZone(zone)(obs$).subscribe(subscriber);
            });
        });
    }; };
    var runInZone = function (zone) { return function (obs$) {
        return new rxjs.Observable(function (subscriber) {
            return obs$.subscribe(function (value) { return zone.run(function () { return subscriber.next(value); }); }, function (error) { return zone.run(function () { return subscriber.error(error); }); }, function () { return zone.run(function () { return subscriber.complete(); }); });
        });
    }; };
    var FirebaseZoneScheduler = (function () {
        function FirebaseZoneScheduler(zone, platformId) {
            this.zone = zone;
            this.platformId = platformId;
        }
        FirebaseZoneScheduler.prototype.schedule = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return this.zone.runGuarded(function () { return rxjs.queueScheduler.schedule.apply(rxjs.queueScheduler, args); });
        };
        FirebaseZoneScheduler.prototype.keepUnstableUntilFirst = function (obs$) {
            if (common.isPlatformServer(this.platformId)) {
                return new rxjs.Observable(function (subscriber) {
                    var noop = function () { };
                    var task = Zone.current.scheduleMacroTask('firebaseZoneBlock', noop, {}, noop, noop);
                    obs$.subscribe(function (next) {
                        if (task.state === 'scheduled') {
                            task.invoke();
                        }
                        subscriber.next(next);
                    }, function (error) {
                        if (task.state === 'scheduled') {
                            task.invoke();
                        }
                        subscriber.error(error);
                    }, function () {
                        if (task.state === 'scheduled') {
                            task.invoke();
                        }
                        subscriber.complete();
                    });
                });
            }
            else {
                return obs$;
            }
        };
        FirebaseZoneScheduler.prototype.runOutsideAngular = function (obs$) {
            var _this = this;
            return new rxjs.Observable(function (subscriber) {
                return _this.zone.runOutsideAngular(function () {
                    return obs$.subscribe(function (value) { return _this.zone.run(function () { return subscriber.next(value); }); }, function (error) { return _this.zone.run(function () { return subscriber.error(error); }); }, function () { return _this.zone.run(function () { return subscriber.complete(); }); });
                });
            });
        };
        return FirebaseZoneScheduler;
    }());
    var noopFunctions = ['ngOnDestroy'];
    var ɵlazySDKProxy = function (klass, observable, zone) {
        return new Proxy(klass, {
            get: function (_, name) { return zone.runOutsideAngular(function () {
                if (klass[name]) {
                    return klass[name];
                }
                if (noopFunctions.includes(name)) {
                    return function () { };
                }
                var promise = observable.toPromise().then(function (mod) {
                    var ret = mod && mod[name];
                    if (typeof ret == 'function') {
                        return ret.bind(mod);
                    }
                    else if (ret && ret.then) {
                        return ret.then(function (res) { return zone.run(function () { return res; }); });
                    }
                    else {
                        return zone.run(function () { return ret; });
                    }
                });
                return new Proxy(function () { return undefined; }, {
                    get: function (_, name) { return promise[name]; },
                    apply: function (self, _, args) { return promise.then(function (it) { return it && it.apply(void 0, args); }); }
                });
            }); }
        });
    };

    var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    };
    var __metadata = (undefined && undefined.__metadata) || function (k, v) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };
    var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
        return function (target, key) { decorator(target, key, paramIndex); }
    };
    var FirebaseOptionsToken = new core.InjectionToken('angularfire2.app.options');
    var FirebaseNameOrConfigToken = new core.InjectionToken('angularfire2.app.nameOrConfig');
    var FIREBASE_OPTIONS = FirebaseOptionsToken;
    var FIREBASE_APP_NAME = FirebaseNameOrConfigToken;
    var FirebaseApp = (function () {
        function FirebaseApp() {
        }
        return FirebaseApp;
    }());
    var VERSION = new core.Version('5.4.2');
    function _firebaseAppFactory(options, zone, nameOrConfig) {
        var name = typeof nameOrConfig === 'string' && nameOrConfig || '[DEFAULT]';
        var config = typeof nameOrConfig === 'object' && nameOrConfig || {};
        config.name = config.name || name;
        var existingApp = firebase.apps.filter(function (app) { return app && app.name === config.name; })[0];
        return (existingApp || zone.runOutsideAngular(function () { return firebase.initializeApp(options, config); }));
    }
    var FirebaseAppProvider = {
        provide: FirebaseApp,
        useFactory: _firebaseAppFactory,
        deps: [
            FIREBASE_OPTIONS,
            core.NgZone,
            [new core.Optional(), FIREBASE_APP_NAME]
        ]
    };
    var AngularFireModule = (function () {
        function AngularFireModule(platformId) {
            if (firebase.registerVersion) {
                firebase.registerVersion('angularfire', VERSION.full, platformId.toString());
                firebase.registerVersion('angular', core.VERSION.full);
            }
        }
        AngularFireModule_1 = AngularFireModule;
        AngularFireModule.initializeApp = function (options, nameOrConfig) {
            return {
                ngModule: AngularFireModule_1,
                providers: [
                    { provide: FIREBASE_OPTIONS, useValue: options },
                    { provide: FIREBASE_APP_NAME, useValue: nameOrConfig }
                ]
            };
        };
        var AngularFireModule_1;
        AngularFireModule = AngularFireModule_1 = __decorate([ __param(0, core.Inject(core.PLATFORM_ID)),
            __metadata("design:paramtypes", [Object])
        ], AngularFireModule);
AngularFireModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireModule });
AngularFireModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireModule_Factory(t) { return new (t || AngularFireModule)(ɵngcc0.ɵɵinject(core.PLATFORM_ID)); }, providers: [FirebaseAppProvider] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireModule, [{
        type: core.NgModule,
        args: [{
                providers: [FirebaseAppProvider]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: core.Inject,
                args: [core.PLATFORM_ID]
            }] }]; }, null); })();
        return AngularFireModule;
    }());

    exports.RealtimeDatabaseURL = RealtimeDatabaseURL;
    exports.DATABASE_URL = DATABASE_URL;
    exports.ɵZoneScheduler = ɵZoneScheduler;
    exports.ɵBlockUntilFirstOperator = ɵBlockUntilFirstOperator;
    exports.ɵAngularFireSchedulers = ɵAngularFireSchedulers;
    exports.ɵkeepUnstableUntilFirstFactory = ɵkeepUnstableUntilFirstFactory;
    exports.runOutsideAngular = runOutsideAngular;
    exports.runInZone = runInZone;
    exports.FirebaseZoneScheduler = FirebaseZoneScheduler;
    exports.ɵlazySDKProxy = ɵlazySDKProxy;
    exports.FirebaseOptionsToken = FirebaseOptionsToken;
    exports.FirebaseNameOrConfigToken = FirebaseNameOrConfigToken;
    exports.FIREBASE_OPTIONS = FIREBASE_OPTIONS;
    exports.FIREBASE_APP_NAME = FIREBASE_APP_NAME;
    exports.FirebaseApp = FirebaseApp;
    exports.VERSION = VERSION;
    exports._firebaseAppFactory = _firebaseAppFactory;
    exports.AngularFireModule = AngularFireModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZS51bWQuanMiLCJzb3VyY2VzIjpbImNvcmUudW1kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esb0dBQTJFO0FBQzNFLHlFQUF5RDtBQUN6RCw0QkFBYTtBQUNiLDBCQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUlXO0FBQ1g7QUFDQTs7Ozs7Ozs7Ozs7a0NBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMsIHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKSwgcmVxdWlyZSgnQGFuZ3VsYXIvY29tbW9uJyksIHJlcXVpcmUoJ3J4anMnKSwgcmVxdWlyZSgncnhqcy9vcGVyYXRvcnMnKSwgcmVxdWlyZSgnZmlyZWJhc2UvYXBwJykpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ0Bhbmd1bGFyL2NvcmUnLCAnQGFuZ3VsYXIvY29tbW9uJywgJ3J4anMnLCAncnhqcy9vcGVyYXRvcnMnLCAnZmlyZWJhc2UvYXBwJ10sIGZhY3RvcnkpIDpcbiAgICAoZmFjdG9yeSgoZ2xvYmFsLmFuZ3VsYXJmaXJlMiA9IHt9KSxnbG9iYWwubmcuY29yZSxnbG9iYWwubmcuY29tbW9uLGdsb2JhbC5yeGpzLGdsb2JhbC5yeGpzLm9wZXJhdG9ycyxnbG9iYWwuZmlyZWJhc2UpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzLGNvcmUsY29tbW9uLHJ4anMsb3BlcmF0b3JzLGZpcmViYXNlKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIGZpcmViYXNlID0gZmlyZWJhc2UgJiYgZmlyZWJhc2UuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSA/IGZpcmViYXNlWydkZWZhdWx0J10gOiBmaXJlYmFzZTtcblxuICAgIHZhciBSZWFsdGltZURhdGFiYXNlVVJMID0gbmV3IGNvcmUuSW5qZWN0aW9uVG9rZW4oJ2FuZ3VsYXJmaXJlMi5yZWFsdGltZURhdGFiYXNlVVJMJyk7XG4gICAgdmFyIERBVEFCQVNFX1VSTCA9IFJlYWx0aW1lRGF0YWJhc2VVUkw7XG4gICAgZnVuY3Rpb24gbm9vcCgpIHsgfVxuICAgIHZhciDJtVpvbmVTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiDJtVpvbmVTY2hlZHVsZXIoem9uZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZSA9PT0gdm9pZCAwKSB7IGRlbGVnYXRlID0gcnhqcy5xdWV1ZVNjaGVkdWxlcjsgfVxuICAgICAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgfVxuICAgICAgICDJtVpvbmVTY2hlZHVsZXIucHJvdG90eXBlLm5vdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLm5vdygpO1xuICAgICAgICB9O1xuICAgICAgICDJtVpvbmVTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldFpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgICAgICB2YXIgd29ya0luWm9uZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Wm9uZS5ydW5HdWFyZGVkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgd29yay5hcHBseShfdGhpcywgW3N0YXRlXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuc2NoZWR1bGUod29ya0luWm9uZSwgZGVsYXksIHN0YXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIMm1Wm9uZVNjaGVkdWxlcjtcbiAgICB9KCkpO1xuICAgIHZhciDJtUJsb2NrVW50aWxGaXJzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gybVCbG9ja1VudGlsRmlyc3RPcGVyYXRvcih6b25lKSB7XG4gICAgICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICDJtUJsb2NrVW50aWxGaXJzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICAgICAgdmFyIHVuc2NoZWR1bGVUYXNrID0gdGhpcy51bnNjaGVkdWxlVGFzay5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy56b25lLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiBab25lLmN1cnJlbnQuc2NoZWR1bGVNYWNyb1Rhc2soJ2ZpcmViYXNlWm9uZUJsb2NrJywgbm9vcCwge30sIG5vb3AsIG5vb3ApOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2UucGlwZShvcGVyYXRvcnMudGFwKHVuc2NoZWR1bGVUYXNrLCB1bnNjaGVkdWxlVGFzaywgdW5zY2hlZHVsZVRhc2spKS5zdWJzY3JpYmUoc3Vic2NyaWJlcikuYWRkKHVuc2NoZWR1bGVUYXNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgybVCbG9ja1VudGlsRmlyc3RPcGVyYXRvci5wcm90b3R5cGUudW5zY2hlZHVsZVRhc2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9IG51bGwgJiYgdGhpcy50YXNrLnN0YXRlID09PSAnc2NoZWR1bGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzay5pbnZva2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gybVCbG9ja1VudGlsRmlyc3RPcGVyYXRvcjtcbiAgICB9KCkpO1xuICAgIHZhciDJtUFuZ3VsYXJGaXJlU2NoZWR1bGVycyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIMm1QW5ndWxhckZpcmVTY2hlZHVsZXJzKG5nWm9uZSkge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgICAgICB0aGlzLm91dHNpZGVBbmd1bGFyID0gbmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyDJtVpvbmVTY2hlZHVsZXIoWm9uZS5jdXJyZW50KTsgfSk7XG4gICAgICAgICAgICB0aGlzLmluc2lkZUFuZ3VsYXIgPSBuZ1pvbmUucnVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyDJtVpvbmVTY2hlZHVsZXIoWm9uZS5jdXJyZW50LCByeGpzLmFzeW5jU2NoZWR1bGVyKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIMm1QW5ndWxhckZpcmVTY2hlZHVsZXJzO1xuICAgIH0oKSk7XG4gICAgZnVuY3Rpb24gybVrZWVwVW5zdGFibGVVbnRpbEZpcnN0RmFjdG9yeShzY2hlZHVsZXJzLCBwbGF0Zm9ybUlkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBrZWVwVW5zdGFibGVVbnRpbEZpcnN0KG9icyQpIHtcbiAgICAgICAgICAgIGlmIChjb21tb24uaXNQbGF0Zm9ybVNlcnZlcihwbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgICAgIG9icyQgPSBvYnMkLmxpZnQobmV3IMm1QmxvY2tVbnRpbEZpcnN0T3BlcmF0b3Ioc2NoZWR1bGVycy5uZ1pvbmUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYnMkLnBpcGUob3BlcmF0b3JzLnN1YnNjcmliZU9uKHNjaGVkdWxlcnMub3V0c2lkZUFuZ3VsYXIpLCBvcGVyYXRvcnMub2JzZXJ2ZU9uKHNjaGVkdWxlcnMuaW5zaWRlQW5ndWxhcikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgcnVuT3V0c2lkZUFuZ3VsYXIgPSBmdW5jdGlvbiAoem9uZSkgeyByZXR1cm4gZnVuY3Rpb24gKG9icyQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyByeGpzLk9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB6b25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JblpvbmUoem9uZSkob2JzJCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07IH07XG4gICAgdmFyIHJ1bkluWm9uZSA9IGZ1bmN0aW9uICh6b25lKSB7IHJldHVybiBmdW5jdGlvbiAob2JzJCkge1xuICAgICAgICByZXR1cm4gbmV3IHJ4anMuT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIG9icyQuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gem9uZS5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsgfSk7IH0sIGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gem9uZS5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnJvcik7IH0pOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiB6b25lLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7IH0pOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTsgfTtcbiAgICB2YXIgRmlyZWJhc2Vab25lU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmlyZWJhc2Vab25lU2NoZWR1bGVyKHpvbmUsIHBsYXRmb3JtSWQpIHtcbiAgICAgICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgICAgICB0aGlzLnBsYXRmb3JtSWQgPSBwbGF0Zm9ybUlkO1xuICAgICAgICB9XG4gICAgICAgIEZpcmViYXNlWm9uZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy56b25lLnJ1bkd1YXJkZWQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhqcy5xdWV1ZVNjaGVkdWxlci5zY2hlZHVsZS5hcHBseShyeGpzLnF1ZXVlU2NoZWR1bGVyLCBhcmdzKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEZpcmViYXNlWm9uZVNjaGVkdWxlci5wcm90b3R5cGUua2VlcFVuc3RhYmxlVW50aWxGaXJzdCA9IGZ1bmN0aW9uIChvYnMkKSB7XG4gICAgICAgICAgICBpZiAoY29tbW9uLmlzUGxhdGZvcm1TZXJ2ZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcnhqcy5PYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub29wID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFzayA9IFpvbmUuY3VycmVudC5zY2hlZHVsZU1hY3JvVGFzaygnZmlyZWJhc2Vab25lQmxvY2snLCBub29wLCB7fSwgbm9vcCwgbm9vcCk7XG4gICAgICAgICAgICAgICAgICAgIG9icyQuc3Vic2NyaWJlKGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFzay5zdGF0ZSA9PT0gJ3NjaGVkdWxlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmludm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KG5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXRlID09PSAnc2NoZWR1bGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaW52b2tlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2suc3RhdGUgPT09ICdzY2hlZHVsZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5pbnZva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzJDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlyZWJhc2Vab25lU2NoZWR1bGVyLnByb3RvdHlwZS5ydW5PdXRzaWRlQW5ndWxhciA9IGZ1bmN0aW9uIChvYnMkKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyByeGpzLk9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYnMkLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIF90aGlzLnpvbmUucnVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7IH0pOyB9LCBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIF90aGlzLnpvbmUucnVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpOyB9KTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuem9uZS5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpOyB9KTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZpcmViYXNlWm9uZVNjaGVkdWxlcjtcbiAgICB9KCkpO1xuICAgIHZhciBub29wRnVuY3Rpb25zID0gWyduZ09uRGVzdHJveSddO1xuICAgIHZhciDJtWxhenlTREtQcm94eSA9IGZ1bmN0aW9uIChrbGFzcywgb2JzZXJ2YWJsZSwgem9uZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KGtsYXNzLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChfLCBuYW1lKSB7IHJldHVybiB6b25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2xhc3NbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtsYXNzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9vcEZ1bmN0aW9ucy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG9ic2VydmFibGUudG9Qcm9taXNlKCkudGhlbihmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBtb2QgJiYgbW9kW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJldCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0LmJpbmQobW9kKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXQgJiYgcmV0LnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiB6b25lLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiByZXM7IH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB6b25lLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiByZXQ7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm94eShmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoXywgbmFtZSkgeyByZXR1cm4gcHJvbWlzZVtuYW1lXTsgfSxcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IGZ1bmN0aW9uIChzZWxmLCBfLCBhcmdzKSB7IHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGl0KSB7IHJldHVybiBpdCAmJiBpdC5hcHBseSh2b2lkIDAsIGFyZ3MpOyB9KTsgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7IH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBfX2RlY29yYXRlID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG4gICAgfTtcbiAgICB2YXIgX19tZXRhZGF0YSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbiAgICB9O1xuICAgIHZhciBfX3BhcmFtID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbiAgICB9O1xuICAgIHZhciBGaXJlYmFzZU9wdGlvbnNUb2tlbiA9IG5ldyBjb3JlLkluamVjdGlvblRva2VuKCdhbmd1bGFyZmlyZTIuYXBwLm9wdGlvbnMnKTtcbiAgICB2YXIgRmlyZWJhc2VOYW1lT3JDb25maWdUb2tlbiA9IG5ldyBjb3JlLkluamVjdGlvblRva2VuKCdhbmd1bGFyZmlyZTIuYXBwLm5hbWVPckNvbmZpZycpO1xuICAgIHZhciBGSVJFQkFTRV9PUFRJT05TID0gRmlyZWJhc2VPcHRpb25zVG9rZW47XG4gICAgdmFyIEZJUkVCQVNFX0FQUF9OQU1FID0gRmlyZWJhc2VOYW1lT3JDb25maWdUb2tlbjtcbiAgICB2YXIgRmlyZWJhc2VBcHAgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGaXJlYmFzZUFwcCgpIHtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRmlyZWJhc2VBcHA7XG4gICAgfSgpKTtcbiAgICB2YXIgVkVSU0lPTiA9IG5ldyBjb3JlLlZlcnNpb24oJzUuNC4yJyk7XG4gICAgZnVuY3Rpb24gX2ZpcmViYXNlQXBwRmFjdG9yeShvcHRpb25zLCB6b25lLCBuYW1lT3JDb25maWcpIHtcbiAgICAgICAgdmFyIG5hbWUgPSB0eXBlb2YgbmFtZU9yQ29uZmlnID09PSAnc3RyaW5nJyAmJiBuYW1lT3JDb25maWcgfHwgJ1tERUZBVUxUXSc7XG4gICAgICAgIHZhciBjb25maWcgPSB0eXBlb2YgbmFtZU9yQ29uZmlnID09PSAnb2JqZWN0JyAmJiBuYW1lT3JDb25maWcgfHwge307XG4gICAgICAgIGNvbmZpZy5uYW1lID0gY29uZmlnLm5hbWUgfHwgbmFtZTtcbiAgICAgICAgdmFyIGV4aXN0aW5nQXBwID0gZmlyZWJhc2UuYXBwcy5maWx0ZXIoZnVuY3Rpb24gKGFwcCkgeyByZXR1cm4gYXBwICYmIGFwcC5uYW1lID09PSBjb25maWcubmFtZTsgfSlbMF07XG4gICAgICAgIHJldHVybiAoZXhpc3RpbmdBcHAgfHwgem9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7IHJldHVybiBmaXJlYmFzZS5pbml0aWFsaXplQXBwKG9wdGlvbnMsIGNvbmZpZyk7IH0pKTtcbiAgICB9XG4gICAgdmFyIEZpcmViYXNlQXBwUHJvdmlkZXIgPSB7XG4gICAgICAgIHByb3ZpZGU6IEZpcmViYXNlQXBwLFxuICAgICAgICB1c2VGYWN0b3J5OiBfZmlyZWJhc2VBcHBGYWN0b3J5LFxuICAgICAgICBkZXBzOiBbXG4gICAgICAgICAgICBGSVJFQkFTRV9PUFRJT05TLFxuICAgICAgICAgICAgY29yZS5OZ1pvbmUsXG4gICAgICAgICAgICBbbmV3IGNvcmUuT3B0aW9uYWwoKSwgRklSRUJBU0VfQVBQX05BTUVdXG4gICAgICAgIF1cbiAgICB9O1xuICAgIHZhciBBbmd1bGFyRmlyZU1vZHVsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFuZ3VsYXJGaXJlTW9kdWxlKHBsYXRmb3JtSWQpIHtcbiAgICAgICAgICAgIGlmIChmaXJlYmFzZS5yZWdpc3RlclZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBmaXJlYmFzZS5yZWdpc3RlclZlcnNpb24oJ2FuZ3VsYXJmaXJlJywgVkVSU0lPTi5mdWxsLCBwbGF0Zm9ybUlkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbignYW5ndWxhcicsIGNvcmUuVkVSU0lPTi5mdWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBBbmd1bGFyRmlyZU1vZHVsZV8xID0gQW5ndWxhckZpcmVNb2R1bGU7XG4gICAgICAgIEFuZ3VsYXJGaXJlTW9kdWxlLmluaXRpYWxpemVBcHAgPSBmdW5jdGlvbiAob3B0aW9ucywgbmFtZU9yQ29uZmlnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5nTW9kdWxlOiBBbmd1bGFyRmlyZU1vZHVsZV8xLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IEZJUkVCQVNFX09QVElPTlMsIHVzZVZhbHVlOiBvcHRpb25zIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogRklSRUJBU0VfQVBQX05BTUUsIHVzZVZhbHVlOiBuYW1lT3JDb25maWcgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBBbmd1bGFyRmlyZU1vZHVsZV8xO1xuICAgICAgICBBbmd1bGFyRmlyZU1vZHVsZSA9IEFuZ3VsYXJGaXJlTW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGNvcmUuTmdNb2R1bGUoe1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW0ZpcmViYXNlQXBwUHJvdmlkZXJdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBfX3BhcmFtKDAsIGNvcmUuSW5qZWN0KGNvcmUuUExBVEZPUk1fSUQpKSxcbiAgICAgICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICAgICAgXSwgQW5ndWxhckZpcmVNb2R1bGUpO1xuICAgICAgICByZXR1cm4gQW5ndWxhckZpcmVNb2R1bGU7XG4gICAgfSgpKTtcblxuICAgIGV4cG9ydHMuUmVhbHRpbWVEYXRhYmFzZVVSTCA9IFJlYWx0aW1lRGF0YWJhc2VVUkw7XG4gICAgZXhwb3J0cy5EQVRBQkFTRV9VUkwgPSBEQVRBQkFTRV9VUkw7XG4gICAgZXhwb3J0cy7JtVpvbmVTY2hlZHVsZXIgPSDJtVpvbmVTY2hlZHVsZXI7XG4gICAgZXhwb3J0cy7JtUJsb2NrVW50aWxGaXJzdE9wZXJhdG9yID0gybVCbG9ja1VudGlsRmlyc3RPcGVyYXRvcjtcbiAgICBleHBvcnRzLsm1QW5ndWxhckZpcmVTY2hlZHVsZXJzID0gybVBbmd1bGFyRmlyZVNjaGVkdWxlcnM7XG4gICAgZXhwb3J0cy7JtWtlZXBVbnN0YWJsZVVudGlsRmlyc3RGYWN0b3J5ID0gybVrZWVwVW5zdGFibGVVbnRpbEZpcnN0RmFjdG9yeTtcbiAgICBleHBvcnRzLnJ1bk91dHNpZGVBbmd1bGFyID0gcnVuT3V0c2lkZUFuZ3VsYXI7XG4gICAgZXhwb3J0cy5ydW5JblpvbmUgPSBydW5JblpvbmU7XG4gICAgZXhwb3J0cy5GaXJlYmFzZVpvbmVTY2hlZHVsZXIgPSBGaXJlYmFzZVpvbmVTY2hlZHVsZXI7XG4gICAgZXhwb3J0cy7JtWxhenlTREtQcm94eSA9IMm1bGF6eVNES1Byb3h5O1xuICAgIGV4cG9ydHMuRmlyZWJhc2VPcHRpb25zVG9rZW4gPSBGaXJlYmFzZU9wdGlvbnNUb2tlbjtcbiAgICBleHBvcnRzLkZpcmViYXNlTmFtZU9yQ29uZmlnVG9rZW4gPSBGaXJlYmFzZU5hbWVPckNvbmZpZ1Rva2VuO1xuICAgIGV4cG9ydHMuRklSRUJBU0VfT1BUSU9OUyA9IEZJUkVCQVNFX09QVElPTlM7XG4gICAgZXhwb3J0cy5GSVJFQkFTRV9BUFBfTkFNRSA9IEZJUkVCQVNFX0FQUF9OQU1FO1xuICAgIGV4cG9ydHMuRmlyZWJhc2VBcHAgPSBGaXJlYmFzZUFwcDtcbiAgICBleHBvcnRzLlZFUlNJT04gPSBWRVJTSU9OO1xuICAgIGV4cG9ydHMuX2ZpcmViYXNlQXBwRmFjdG9yeSA9IF9maXJlYmFzZUFwcEZhY3Rvcnk7XG4gICAgZXhwb3J0cy5Bbmd1bGFyRmlyZU1vZHVsZSA9IEFuZ3VsYXJGaXJlTW9kdWxlO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbiJdfQ==