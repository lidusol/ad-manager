import { __decorate, __metadata } from "tslib";
import { Pipe } from '@angular/core';
import twemoji from 'twemoji';
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';
import * as Éµngcc0 from '@angular/core';
import * as Éµngcc1 from '@angular/platform-browser';
var EmojiFallback = /** @class */ (function () {
    function EmojiFallback(domSanitizer) {
        this.domSanitizer = domSanitizer;
    }
    EmojiFallback.prototype.transform = function (emoji) {
        return !emoji || this.supportsEmoji() ? emoji : this.domSanitizer.bypassSecurityTrustHtml(twemoji.parse(emoji.trim()));
    };
    // Solution: https://stackoverflow.com/questions/45576748/how-can-i-detect-rendering-support-for-emoji-in-javascript
    EmojiFallback.prototype.supportsEmoji = function () {
        var ctx = document.createElement("canvas").getContext("2d");
        ctx.fillText("ðŸ™ƒ", -2, 4);
        return ctx.getImageData(0, 0, 1, 1).data[3] > 0;
    };
    EmojiFallback.ctorParameters = function () { return [
        { type: DomSanitizer }
    ]; };
    EmojiFallback = __decorate([ __metadata("design:paramtypes", [DomSanitizer])
    ], EmojiFallback);
EmojiFallback.Éµfac = function EmojiFallback_Factory(t) { return new (t || EmojiFallback)(Éµngcc0.ÉµÉµdirectiveInject(Éµngcc1.DomSanitizer)); };
EmojiFallback.Éµpipe = Éµngcc0.ÉµÉµdefinePipe({ name: "emojiFallback", type: EmojiFallback, pure: true });
/*@__PURE__*/ (function () { Éµngcc0.ÉµsetClassMetadata(EmojiFallback, [{
        type: Pipe,
        args: [{
                name: 'emojiFallback'
            }]
    }], function () { return [{ type: Éµngcc1.DomSanitizer }]; }, null); })();
    return EmojiFallback;
}());
export { EmojiFallback };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1vamktZmFsbGJhY2sucGlwZS5qcyIsInNvdXJjZXMiOlsibmc6L25neC1lbW9qaS1waWNrZXIvbGliL3BpcGVzL2Vtb2ppLWZhbGxiYWNrLnBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQ3BELE9BQU8sT0FBTyxNQUFNLFNBQVMsQ0FBQztBQUM5QixPQUFPLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxNQUFNLDJCQUEyQixDQUFDOzs7QUFLbkU7QUFBaUQsSUFDL0MsdUJBQW9CLFlBQTBCO0FBQ2hELFFBRHNCLGlCQUFZLEdBQVosWUFBWSxDQUFjO0FBQUMsSUFFL0MsQ0FBQztBQUNILElBQ0UsaUNBQVMsR0FBVCxVQUFVLEtBQWE7QUFBSSxRQUMxQixPQUFPLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMxSCxJQUFFLENBQUM7QUFFSCxJQUFFLG9IQUFvSDtBQUN0SCxJQUFFLHFDQUFhLEdBQWI7QUFBYyxRQUNaLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2hFLFFBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDOUIsUUFBSSxPQUFPLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNwRCxJQUFFLENBQUM7QUFDRjtBQUN3RCxnQkFmckIsWUFBWTtBQUFHO0FBSWxELElBTFksYUFBYSx3QkFIekIsSUFBSSxDQUFDLGNBQ0osSUFBSSxFQUFFLGxDQUVBLGtDQUM0QixZQUFZO0FBSHpCLFVBQ3RCLENBQUMsWEFFaUQsT0FEdEMsYUFBYSxDQWV6Qjs7Ozs7Ozs7NkVBQ0Q7QUFBQyxJQURELG9CQUFDO0FBQ0EsQ0FEQSxBQWZELElBZUM7QUFDRCxTQWhCYSxhQUFhO0FBQUkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgdHdlbW9qaSBmcm9tICd0d2Vtb2ppJztcbmltcG9ydCB7IERvbVNhbml0aXplciwgU2FmZUh0bWwgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcblxuQFBpcGUoe1xuICBuYW1lOiAnZW1vamlGYWxsYmFjaydcbn0pXG5leHBvcnQgY2xhc3MgRW1vamlGYWxsYmFjayBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRvbVNhbml0aXplcjogRG9tU2FuaXRpemVyKSB7XG5cbiAgfVxuICBcbiAgdHJhbnNmb3JtKGVtb2ppOiBzdHJpbmcpOiBzdHJpbmd8U2FmZUh0bWwge1xuICAgcmV0dXJuICFlbW9qaSB8fCB0aGlzLnN1cHBvcnRzRW1vamkoKSA/IGVtb2ppIDogdGhpcy5kb21TYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdEh0bWwodHdlbW9qaS5wYXJzZShlbW9qaS50cmltKCkpKTtcbiAgfVxuXG4gIC8vIFNvbHV0aW9uOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NTU3Njc0OC9ob3ctY2FuLWktZGV0ZWN0LXJlbmRlcmluZy1zdXBwb3J0LWZvci1lbW9qaS1pbi1qYXZhc2NyaXB0XG4gIHN1cHBvcnRzRW1vamkoKSB7XG4gICAgdmFyIGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGN0eC5maWxsVGV4dChcIvCfmYNcIiwgLTIsIDQpO1xuICAgIHJldHVybiBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGFbM10gPiAwO1xuICB9XG59XG4iXX0=